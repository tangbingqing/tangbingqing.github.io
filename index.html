<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"tangbingqing.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="T.ng">
<meta property="og:url" content="https://tangbingqing.github.io/index.html">
<meta property="og:site_name" content="T.ng">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="T.ng">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://tangbingqing.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>T.ng</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">T.ng</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-ä¸»é¡µ"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>ä¸»é¡µ</a></li><li class="menu-item menu-item-æ ‡ç­¾"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-åˆ†ç±»"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-å…³äº"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="T.ng"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">T.ng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/tangbingqing" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;tangbingqing" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/05/01/duo-yuan-zong-jie/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/01/duo-yuan-zong-jie/" class="post-title-link" itemprop="url">å¤šå…ƒ-æ€»ç»“</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-05-01 20:12:41 / ä¿®æ”¹æ—¶é—´ï¼š21:56:58" itemprop="dateCreated datePublished" datetime="2022-05-01T20:12:41+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">å¤šå…ƒç»Ÿè®¡</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2><span id="ä¸€-å˜é‡ä¹‹é—´çš„å…³ç³»">ä¸€ã€å˜é‡ä¹‹é—´çš„å…³ç³»</span></h2><h4><span id="1-ä¸¤ä¸ªæˆ–å¤šä¸ªç¦»æ•£å‹å˜é‡ä¹‹é—´çš„ç›¸å…³å…³ç³»">1ã€ä¸¤ä¸ªæˆ–å¤šä¸ªç¦»æ•£å‹å˜é‡ä¹‹é—´çš„ç›¸å…³å…³ç³»</span></h4><p><strong>å¯¹åº”åˆ†æ</strong>ï¼šè¡Œå˜é‡ç±»é—´ä¸åˆ—å˜é‡ç±»é—´çš„è”ç³»</p>
<h4><span id="2-ä¸€ç»„å˜é‡ä¸å•ä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³å…³ç³»">2ã€ä¸€ç»„å˜é‡ä¸å•ä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³å…³ç³»</span></h4><p><strong>å›å½’ä»»åŠ¡</strong>ï¼š <em>p</em>ä¸ªè¾“å…¥å˜é‡ğ‘‹1, ğ‘‹2,â€¦, ğ‘‹ğ‘ ä¸å•ä¸ªè¾“å‡º<strong>è¿ç»­å‹å˜é‡Y</strong>ä¹‹é—´çš„å…³ç³»ï¼Œ</p>
<p>Y**=** ğ›½0 + ğ›½1ğ‘‹1 + ğ›½2ğ‘‹2 +â€¦+ ğ›½ğ‘ ğ‘‹ğ‘</p>
<p>æ¯”å¦‚æœ€å°äºŒä¹˜ã€å²­å›å½’ã€Lasso</p>
<p><strong>åˆ†ç±»ä»»åŠ¡</strong>ï¼š <em>p</em>ä¸ªè¾“å…¥å˜é‡ğ‘‹1, ğ‘‹2,â€¦, ğ‘‹ğ‘ ä¸å•ä¸ªè¾“å‡º<strong>ç¦»æ•£å‹å˜é‡Y</strong>ä¹‹é—´çš„å…³ç³»</p>
<p>Y=sign( ğ›¼0 + ğ›¼1ğ‘‹1 + ğ›¼2ğ‘‹2 +â€¦+ ğ›¼ğ‘ ğ‘‹ğ‘ âˆ’ é˜ˆå€¼) </p>
<p>æ¯”å¦‚Fisherçº¿æ€§åˆ¤åˆ«åˆ†æã€Logisticå›å½’</p>
<h4><span id="3-ä¸€ç»„å˜é‡ä¹‹é—´çš„ç›¸å…³å…³ç³»">3ã€ä¸€ç»„å˜é‡ä¹‹é—´çš„ç›¸å…³å…³ç³»</span></h4><p><strong>ä¸»æˆåˆ†åˆ†æ</strong>ï¼š å˜é‡ğ‘‹1, ğ‘‹2,â€¦, ğ‘‹ğ‘ è½¬åŒ–ä¸ºè‹¥å¹²ä¸ªå°‘æ•°å˜é‡ğ‘1, ğ‘2,â€¦, ğ‘ğ‘š(ğ‘š &lt; ğ‘) </p>
<p><strong>å› å­åˆ†æ</strong>ï¼šæå–å˜é‡ğ‘‹1, ğ‘‹2,â€¦, ğ‘‹ğ‘ä¸­çš„å…±æœ‰æ½œåœ¨å†…å®¹</p>
<h4><span id="4-ä¸€ç»„å˜é‡ä¸å¦ä¸€ç»„å˜é‡ä¹‹é—´çš„å…³ç³»">4ã€ä¸€ç»„å˜é‡ä¸å¦ä¸€ç»„å˜é‡ä¹‹é—´çš„å…³ç³»</span></h4><p><strong>å…¸å‹ç›¸å…³åˆ†æ</strong>ï¼šåœ¨æ¯ç»„å˜é‡ä¸­æ‰¾å‡ºå˜é‡çš„çº¿æ€§ç»„åˆ , ä¸¤ç»„å˜é‡ä¹‹é—´çš„å…³ç³»</p>
<p><em>u</em>1 =a1x1 + a2x2 </p>
<p><em>v</em>1 = b1y1 + b2y2 + b3y3</p>
<h2><span id="äºŒ-å„æ–¹æ³•çš„åŸºæœ¬æ€æƒ³-ç”¨é€”-ä½¿ç”¨æ¡ä»¶-ä¼˜ç¼ºç‚¹">äºŒã€å„æ–¹æ³•çš„åŸºæœ¬æ€æƒ³ã€ç”¨é€”ã€ä½¿ç”¨æ¡ä»¶ã€ä¼˜ç¼ºç‚¹</span></h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ç”¨é€”</th>
<th></th>
<th>åŸºæœ¬æ€æƒ³</th>
<th>ä½¿ç”¨æ¡ä»¶</th>
<th>ä¼˜ç‚¹</th>
<th>ç¼ºç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å›å½’åˆ†æ</strong></td>
<td>åˆ©ç”¨å·²çŸ¥<strong>è¿ç»­æ€§è¾“å‡ºå˜é‡</strong>çš„æ•°æ®å»ºæ¨¡å¯¹é¢„æµ‹æœªæ¥æ•°æ®è¾“å‡ºå€¼</td>
<td><strong>æœ€å°äºŒä¹˜</strong></td>
<td></td>
<td>æ ·æœ¬çŸ©é˜µXæ˜¯åˆ—æ»¡ç§©ï¼Œåˆ—ä¹‹é—´çº¿æ€§ç›¸å…³è¾ƒå°</td>
<td></td>
<td>ä¸ç¬¦åˆä½¿ç”¨æ¡ä»¶æ—¶ï¼Œè®¡ç®—è¯¯å·®å¤§ï¼Œç¼ºä¹ç¨³å®šæ€§å’Œå¯é æ€§</td>
</tr>
<tr>
<td></td>
<td></td>
<td><strong>Lasso</strong></td>
<td>æ„é€ ä¸€ä¸ªæƒ©ç½šå‡½æ•°å¾—åˆ°ä¸€ä¸ªè¾ƒä¸ºç²¾ç‚¼çš„æ¨¡å‹ï¼Œä½¿å¾—å®ƒå‹ç¼©ä¸€äº›å›å½’ç³»æ•°</td>
<td></td>
<td>æœ‰æ•ˆé¿å…è¿‡æ‹Ÿåˆ</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td><strong>å²­å›å½’</strong></td>
<td>l2æ­£åˆ™åŒ–ï¼Œé€šè¿‡æ”¾å¼ƒæœ€å°äºŒä¹˜æ³•çš„æ— åæ€§</td>
<td>ä¸“ç”¨äºå…±çº¿æ€§æ•°æ®åˆ†æ</td>
<td>æ›´ç¬¦åˆå®é™…ã€æ›´å¯é ï¼Œå¯¹ç—…æ€æ•°æ®çš„æ‹Ÿåˆå¼ºäºæœ€å°äºŒä¹˜æ³•</td>
<td>æŸå¤±éƒ¨åˆ†ä¿¡æ¯ã€é™ä½ç²¾åº¦</td>
</tr>
<tr>
<td><strong>åˆ†ç±»</strong></td>
<td>åˆ©ç”¨å·²çŸ¥<strong>ç¦»æ•£å‹è¾“å‡ºå˜é‡</strong>çš„æ•°æ®å»ºæ¨¡å¯¹é¢„æµ‹æœªæ¥æ•°æ®è¾“å‡ºå€¼</td>
<td><strong>Fisherçº¿æ€§åˆ¤åˆ«æ³•</strong></td>
<td>åˆ©ç”¨æŠ•å½±ä½¿å¤šç»´é—®é¢˜ç®€åŒ–ä¸ºä¸€ç»´é—®é¢˜æ¥å¤„ç†ã€‚ä½¿æ¯ä¸€ç±»å†…çš„æŠ•å½±å€¼æ‰€å½¢æˆçš„ç±»å†…ç¦»å·®å°½å¯èƒ½å°ï¼Œè€Œä¸åŒç±»é—´çš„æŠ•å½±å€¼æ‰€å½¢æˆçš„ç±»é—´ç¦»å·®å°½å¯å¤§</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td><strong>Logisticå›å½’</strong></td>
<td>ç”¨æ¦‚ç‡ä¼°è®¡æŸä»¶äº‹å‘ç”Ÿçš„å¯èƒ½æ€§</td>
<td></td>
<td>1ã€é€‚åˆäºŒåˆ†ç±»é—®é¢˜ï¼Œä¸éœ€è¦ç¼©æ”¾è¾“å…¥ç‰¹å¾ 2ã€ç›´æ¥å¯¹åˆ†ç±»å¯èƒ½æ€§è¿›è¡Œå»ºæ¨¡ï¼Œé¿å…äº†å‡è®¾åˆ†å¸ƒä¸å‡†ç¡®æ‰€å¸¦æ¥çš„é—®é¢˜</td>
<td></td>
</tr>
<tr>
<td><strong>èšç±»</strong></td>
<td>å¯¹æ— ç±»åˆ«çš„æ•°æ®è¿›è¡Œå»ºæ¨¡ï¼Œä¾æ®æ•°æ®ä¹‹é—´ç‰¹å¾çš„ç›¸ä¼¼æ€§è¿›è¡Œ<strong>åˆ†ç»„</strong></td>
<td><strong>å±‚æ¬¡èšç±»</strong></td>
<td>å¼€å§‹å°†<em>n</em>ä¸ªæ ·æœ¬å„è‡ªä½œä¸ºä¸€ç±»ï¼Œå¹¶è§„å®šæ ·æœ¬ä¹‹é—´çš„è·ç¦»å’Œç±»ä¸ç±»ä¹‹é—´çš„è·ç¦»ï¼Œç„¶åå°†è·ç¦»æœ€è¿‘çš„ä¸¤ç±»åˆå¹¶æˆä¸€ä¸ªæ–°ç±»ï¼Œè®¡ç®—æ–°ç±»ä¸å…¶ä»–ç±»çš„è·ç¦»ï¼›é‡å¤è¿›è¡Œä¸¤ä¸ªæœ€è¿‘ç±»çš„åˆå¹¶ï¼Œæ¯æ¬¡å‡å°‘ä¸€ç±»ï¼Œç›´è‡³æ‰€æœ‰çš„æ ·æœ¬åˆå¹¶ä¸ºä¸€ç±»ã€‚</td>
<td>æ•°æ®éå‡åŒ€åˆ†å¸ƒ</td>
<td>1ã€ç›¸ä¼¼åº¦å®¹æ˜“å®šä¹‰ï¼Œé™åˆ¶å°‘  2ã€ä¸éœ€è¦é¢„å…ˆæŒ‡å®šèšç±»æ•°  3ã€å¯ä»¥å‘ç°ç±»çš„å±‚æ¬¡å…³ç³»  4ã€å¯ä»¥èšç±»æˆå…¶å®ƒå½¢çŠ¶</td>
<td>1ã€è®¡ç®—å¤æ‚åº¦å¤ªé«˜   2ã€å—å¥‡å¼‚å€¼å½±å“è¾ƒå¤§  3ã€ç®—æ³•å¾ˆå¯èƒ½èšç±»æˆé“¾çŠ¶</td>
</tr>
<tr>
<td></td>
<td></td>
<td><strong>åŠ¨æ€èšç±»</strong></td>
<td>é€‰æ‹©ä¸€æ‰¹å‡èšç‚¹æˆ–ç»™å‡ºä¸€ä¸ªåˆå§‹çš„åˆ†ç±»ï¼Œè®©æ ·æœ¬æŒ‰æŸç§åŸåˆ™å‘å‡èšç‚¹å‡èšï¼Œå¯¹å‡èšç‚¹è¿›è¡Œä¸æ–­çš„ä¿®æ”¹æˆ–è¿­ä»£ï¼Œç›´è‡³åˆ†ç±»æ¯”è¾ƒåˆç†æˆ–è¿­ä»£ç¨³å®šä¸ºæ­¢ã€‚ç±»çš„ä¸ªæ•°<em>k</em>å¯ä»¥äº‹å…ˆæŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨èšç±»è¿‡ç¨‹ä¸­ç¡®å®šã€‚</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>å¯¹åº”åˆ†æ</strong></td>
<td>æˆå¯¹<strong>ç¦»æ•£å‹å˜é‡</strong>çš„å„æ°´å¹³ç›¸äº’å…³ç³»</td>
<td></td>
<td>å¯¹åº”åˆ†æå°†å˜é‡åŠå˜é‡ä¹‹é—´çš„è”ç³»åŒæ—¶åæ˜ åœ¨ä¸€å¼ äºŒç»´æˆ–ä¸‰ç»´çš„æ•£ç‚¹å›¾ä¸Šï¼Œå¹¶ä½¿è”ç³»å¯†åˆ‡çš„æ°´å¹³ç‚¹è¾ƒé›†ä¸­ï¼Œè”ç³»ç–è¿œçš„æ°´å¹³ç‚¹è¾ƒåˆ†æ•£</td>
<td></td>
<td>1ã€æ­ç¤ºè¡Œå˜é‡ç±»é—´ä¸åˆ—å˜é‡ç±»é—´çš„è”ç³»  2ã€å°†ç±»åˆ«çš„è”ç³»ç›´è§‚åœ°è¡¨ç°åœ¨å›¾å½¢ä¸­</td>
<td>1ã€ä¸èƒ½ç”¨äºç›¸å…³å…³ç³»çš„å‡è®¾æ£€éªŒ  2ã€ç»´æ•°æœ‰ç ”ç©¶è€…è‡ªå®š 3ã€å—æç«¯å€¼çš„å½±å“</td>
</tr>
<tr>
<td><strong>ä¸»æˆåˆ†åˆ†æ</strong></td>
<td>å°‘æ•°ç»¼åˆå˜é‡ä»£æ›¿åŸå§‹å˜é‡çš„å¤§éƒ¨åˆ†ä¿¡æ¯é‡æ–°è¡¨ç¤ºæ•°æ®</td>
<td></td>
<td>åœ¨æ•°æ®å„å˜é‡ç›¸å…³çš„æƒ…å†µä¸‹ï¼Œå°†åŸå§‹å˜é‡åšçº¿æ€§åŠ æƒå½¢æˆè‹¥å°‘æ•°å‡ ä¸ªçº¿æ€§æ— å…³çš„ç»¼åˆå˜é‡ï¼Œå¹¶åæ˜ å‡ºåŸå˜é‡çš„å¤§éƒ¨åˆ†ä¿¡æ¯</td>
<td>å˜é‡éœ€è¦æœ‰è¾ƒå¼ºçš„ç›¸å…³æ€§</td>
<td></td>
<td>1ã€å´æ— æ³•é€šè¿‡å‚æ•°åŒ–ç­‰æ–¹æ³•å¯¹å¤„ç†è¿‡ç¨‹è¿›è¡Œå¹²é¢„ï¼Œå¯èƒ½ä¼šå¾—ä¸åˆ°é¢„æœŸçš„æ•ˆæœ   2ã€ç‰¹å¾å€¼åˆ†è§£å˜æ¢çš„çŸ©é˜µå¿…é¡»æ˜¯æ–¹é˜µ 3ã€åœ¨éé«˜æ–¯åˆ†å¸ƒæƒ…å†µä¸‹ï¼ŒPCAæ–¹æ³•å¾—å‡ºçš„ä¸»æˆåˆ†å¯èƒ½å¹¶ä¸æ˜¯æœ€ä¼˜çš„</td>
</tr>
<tr>
<td><strong>å› å­åˆ†æ</strong></td>
<td>1ã€å¯»æ±‚åŸºæœ¬ç»“æ„ï¼Œç®€åŒ–è§‚æµ‹ç³»ç»Ÿ  2ã€ç”¨äºåˆ†ç±»,å¯¹pä¸ªå˜é‡æˆ–nä¸ªæ ·å“è¿›è¡Œåˆ†ç±»</td>
<td></td>
<td>ä»å˜é‡ç¾¤ä¸­æå–<strong>å…±æ€§å› å­</strong>çš„ç»Ÿè®¡æŠ€æœ¯ï¼Œå³å°†ç›¸åŒæœ¬è´¨çš„å˜é‡å½’å…¥ä¸€ä¸ªå› å­ï¼Œå¯å‡å°‘å˜é‡çš„æ•°ç›®ï¼Œè¿˜å¯æ£€éªŒå˜é‡é—´å…³ç³»çš„å‡è®¾ã€‚</td>
<td></td>
<td></td>
<td>ç¡®å®šåº”è¯¥æå–çš„å› å­æ•°é‡çš„æ–¹æ³•æˆ–è€…è¿‡äºä¸»è§‚ï¼Œå› ä¸ºä¸»è§‚æ€§è€Œæœ‰æ‰€åå·®</td>
</tr>
<tr>
<td><strong>å…¸å‹ç›¸å…³åˆ†æ</strong></td>
<td>å¯»æ‰¾ä¸¤ç»„å˜é‡é—´å­˜åœ¨ç”±å¤§åˆ°å°çš„å…¸å‹çš„çº¿æ€§ç›¸ä¼¼åº¦åºåˆ—</td>
<td></td>
<td>1ã€åœ¨æ¯ç»„å˜é‡ä¸­æ‰¾å‡ºå˜é‡çš„çº¿æ€§ç»„åˆï¼Œä½¿å¾—ä¸¤ç»„çš„çº¿æ€§ç»„åˆä¹‹é—´å…·æœ‰æœ€å¤§çš„ç›¸å…³ç³»  2ã€é‡å¤åˆ°ä¸¤ç»„å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§è¢«æå–å®Œæ¯•</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2><span id="ä¸‰-å…¶ä»–æ¦‚å¿µ">ä¸‰ã€å…¶ä»–æ¦‚å¿µ</span></h2><p>1ã€</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/05/01/duo-yuan-dian-xing-xiang-guan-fen-xi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/01/duo-yuan-dian-xing-xiang-guan-fen-xi/" class="post-title-link" itemprop="url">å¤šå…ƒç»Ÿè®¡ - å…¸å‹ç›¸å…³åˆ†æ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-05-01 14:03:41 / ä¿®æ”¹æ—¶é—´ï¼š16:26:40" itemprop="dateCreated datePublished" datetime="2022-05-01T14:03:41+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">å¤šå…ƒç»Ÿè®¡</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3><span id="å…¸å‹ç›¸å…³åˆ†æ">å…¸å‹ç›¸å…³åˆ†æ</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">sklearn<span class="token punctuation">.</span>CCA <span class="token punctuation">(</span> n_components <span class="token operator">=</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token operator">*</span> <span class="token punctuation">,</span> scale <span class="token operator">=</span> <span class="token boolean">True</span> <span class="token punctuation">)</span>

<span class="token comment"># n_components : è¦ä¿ç•™çš„ç»„ä»¶æ•°</span>
<span class="token comment"># scale : æ˜¯å¦å¯¹å˜é‡è¿›è¡Œå½’ä¸€åŒ–å¤„ç†</span>


å±æ€§ï¼š
<span class="token comment"># transform : åº”ç”¨é™ç»´</span>
<span class="token comment"># x_weights_, y_weights_ : å…¸å‹å˜é‡çš„æƒé‡</span>
<span class="token comment"># x_loadings_, y_loadings_ : å…¸å‹å˜é‡çš„è½½è·</span>
<span class="token comment"># x_scores_, y_scores_ : å…¸å‹å˜é‡çš„å¾—åˆ†</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3><span id="ä¸€-æ•°æ®é›†ç®€ä»‹">ä¸€ã€æ•°æ®é›†ç®€ä»‹</span></h3><blockquote>
<p>æ•™å¸ˆæ•°æ® (aaup.csv) è¯¥æ•°æ®æ¥è‡ªç¾å›½å¤§å­¦æ•™æˆåä¼š (AAUP) å¹´åº¦æ™®æŸ¥, åŒ…æ‹¬åˆ†åˆ«æŒ‰ç…§æ­£æ•™æˆå’Œå‰¯æ•™æˆçš„å¹³å‡å·¥èµ„å’Œè¡¥è´´ (1994 å¹´) ç»Ÿè®¡çš„æ•°æ®ã€‚ä¸€å…±æœ‰13 ä¸ªæ•°é‡å˜é‡: ASF (æ­£æ•™æˆå¹³å‡å·¥èµ„)ã€ ASA1 (å‰¯æ•™æˆå¹³å‡å·¥èµ„)ã€ ASA2 (åŠ©ç†æ•™æˆå¹³å‡å·¥èµ„)ã€ ASALL (æ‰€æœ‰çº§åˆ«å¹³å‡å·¥èµ„)ã€ ACF (æ­£æ•™æˆå¹³å‡è¡¥è´´)ã€ACA1 (å‰¯æ•™æˆå¹³å‡è¡¥è´´)ã€ ACA2 (åŠ©ç†æ•™æˆå¹³å‡è¡¥è´´)ã€ ACALL (æ‰€æœ‰çº§åˆ«å¹³å‡è¡¥è´´)ã€ NF (æ­£æ•™æˆäººæ•°)ã€NA1 (å‰¯æ•™æˆäººæ•°)ã€ NA2 (åŠ©ç†æ•™æˆäººæ•°)ã€ NIN (åŠ©æ•™äººæ•°)ã€ NALL (æ‰€æœ‰çº§åˆ«æ•™æˆæ•°ç›®).è¯¥æ•°æ®æ¶‰åŠ 1161 ä¸ªå­¦æ ¡ã€‚</p>
<p>ç°éœ€è¦åˆ†æä¸€ç»„å˜é‡å„ç±»äººå‘˜è–ªèµ„ï¼ˆä»¥å­—æ¯ A ä¸ºå¼€å¤´çš„ 8 ä¸ªå˜é‡ï¼‰ï¼Œä¸å¦ä¸€ç»„å˜é‡æ•™å¸ˆäººæ•°ï¼ˆä»¥å­—æ¯ N å¼€å¤´çš„ 5 ä¸ªå˜é‡ï¼‰ä¹‹é—´å­˜åœ¨çš„æ½œåœ¨å…³ç³»ã€‚</p>
</blockquote>
<h3><span id="äºŒ-å®éªŒ">äºŒã€å®éªŒ</span></h3><p>1ã€è®¡ç®—æ‰€æœ‰å˜é‡é—´ç›¸å…³ç³»æ•°çŸ©é˜µ(11Ã—11 çš„çŸ©é˜µ)M_corrï¼šåˆ©ç”¨ä»¥ä¸‹ä»£ç å®ç°numpy.corrcoef(x, y=None, rowvar=True) ï¼Œè§‚å¯Ÿä¸€ä¸‹ä¸¤ç»„å˜é‡ä¸­å“ªäº›å˜é‡å¯èƒ½å­˜åœ¨ç›¸å…³æ€§</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"aaup.csv"</span><span class="token punctuation">)</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>data<span class="token punctuation">[</span>data<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>data<span class="token punctuation">[</span>data<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

M_corr <span class="token operator">=</span> np<span class="token punctuation">.</span>corrcoef<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> rowvar<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/2022/05/01/duo-yuan-dian-xing-xiang-guan-fen-xi/image-20220501154750542.png" alt="image-20220501154750542"></p>
<p>2ã€åˆ©ç”¨å…¸å‹ç›¸å…³åˆ†æè®¡ç®—ä¸¤ç»„å˜é‡ä¹‹é—´çš„å…¸å‹ç›¸å…³ç³»æ•°ï¼Œå¹¶ç»˜åˆ¶äºŒç»´æŠ˜çº¿å›¾ï¼ˆå´–åº•ç¢çŸ³åœŸï¼‰ï¼Œå…¶ä¸­æ¨ªåæ ‡ä¸ºå…¸å‹ç›¸å…³ç³»æ•°çš„ä¸ªæ•°ï¼Œçºµåæ ‡ä¸ºå¯¹åº”çš„ç¬¬ <em>i</em> ä¸ªå…¸å‹ç›¸å…³ç³»æ•°ã€‚</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>cross_decomposition <span class="token keyword">import</span> CCA
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler

data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"aaup.csv"</span><span class="token punctuation">)</span>

scal <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> scal<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

x <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

cca <span class="token operator">=</span> CCA<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  
cca<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
X_c<span class="token punctuation">,</span> Y_c <span class="token operator">=</span> cca<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    M_corr <span class="token operator">=</span> np<span class="token punctuation">.</span>corrcoef<span class="token punctuation">(</span>X_c<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> i<span class="token punctuation">]</span><span class="token punctuation">,</span> Y_c<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> i<span class="token punctuation">]</span><span class="token punctuation">,</span> rowvar<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token builtin">sum</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>M_corr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span> 
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span> 
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token builtin">sum</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># åˆ»åº¦</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"ä¸ªæ•°"</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"ç›¸å…³ç³»æ•°"</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><img src="/2022/05/01/duo-yuan-dian-xing-xiang-guan-fen-xi/image-20220501162310209.png" alt="image-20220501162310209"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/05/01/duo-yuan-yin-zi-fen-xi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/01/duo-yuan-yin-zi-fen-xi/" class="post-title-link" itemprop="url">å¤šå…ƒ-å› å­åˆ†æ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-05-01 11:12:41 / ä¿®æ”¹æ—¶é—´ï¼š21:56:31" itemprop="dateCreated datePublished" datetime="2022-05-01T11:12:41+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">å¤šå…ƒç»Ÿè®¡</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3><span id="å› å­åˆ†æ">å› å­åˆ†æ</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">factor_analyzer<span class="token punctuation">.</span>FactorAnalyzer<span class="token punctuation">(</span>n_factors<span class="token operator">=</span><span class="token number">3</span> <span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token string">'promax'</span> <span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'minres'</span> <span class="token punctuation">)</span>

<span class="token comment"># n_factors : è¦é€‰æ‹©çš„å› ç´ çš„æ•°é‡ã€‚é»˜è®¤ä¸º 3</span>

<span class="token comment"># rotation : æ—‹è½¬</span>
varimaxï¼ˆæ­£äº¤æ—‹è½¬ï¼‰
promaxï¼ˆå€¾æ–œæ—‹è½¬ï¼‰
obliminï¼ˆå€¾æ–œæ—‹è½¬ï¼‰
oblimaxï¼ˆæ­£äº¤æ—‹è½¬ï¼‰
quartiminï¼ˆæ–œå‘æ—‹è½¬ï¼‰
quartimaxï¼ˆæ­£äº¤æ—‹è½¬ï¼‰
equamaxï¼ˆæ­£äº¤æ—‹è½¬ï¼‰

<span class="token comment"># method ï¼šè¦ä½¿ç”¨çš„æ‹Ÿåˆæ–¹æ³•</span>
minresï¼ˆä¸»å› å­æ³•ï¼‰ <span class="token punctuation">,</span> mlï¼ˆä¸»å› å­æ³•ï¼‰ <span class="token punctuation">,</span> principalï¼ˆä¸»æˆåˆ†æ³•ï¼‰


å±æ€§ï¼š
loadings ï¼š å› å­è½½è·çŸ©é˜µ
get_communalities ï¼š å› å­å…±åŒåº¦ï¼Œæ‰€æœ‰å› å­å¯¹å„å˜é‡çš„è´¡çŒ®ç‡ï¼ˆXiå¯¹å…¬å› å­Fçš„ä¾èµ–ç¨‹åº¦ï¼‰
get_factor_variance ï¼šæ¯ä¸ªå› å­çš„æ–¹å·®ã€æ¯”ä¾‹æ–¹å·®å’Œç´¯ç§¯æ–¹å·®
get_factor_variance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> ï¼š å„å› å­ç´¯è®¡è´¡çŒ®ç‡

get_eigenvalues<span class="token punctuation">(</span><span class="token punctuation">)</span> ï¼šå› å­ç‰¹å¾å€¼ï¼ŒåŸå§‹ç‰¹å¾å€¼å’Œå…¬å› å­ç‰¹å¾å€¼
transform<span class="token punctuation">(</span><span class="token punctuation">)</span> ï¼š å› å­å¾—åˆ†ï¼Œæ¯æ¡æ•°æ®çš„å…¬å› å­è¡¨ç¤ºå½¢å¼
rotation_matrix ï¼š æ—‹è½¬çŸ©é˜µ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3><span id="å®éªŒ">å®éªŒï¼š</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> random


<span class="token keyword">from</span> factor_analyzer <span class="token keyword">import</span> FactorAnalyzer
<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> datasets
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns


<span class="token comment"># ä¸‹è½½æ•°æ®</span>
datasets<span class="token punctuation">.</span>clear_data_home<span class="token punctuation">(</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> datasets<span class="token punctuation">.</span>load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data


fa <span class="token operator">=</span> FactorAnalyzer<span class="token punctuation">(</span>n_factors<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>rotation<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token string">'minres'</span><span class="token punctuation">)</span>
fa<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>data<span class="token punctuation">)</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å„å› å­çš„ç´¯è®¡è´¡çŒ®ç‡ä¸º"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>fa<span class="token punctuation">.</span>get_factor_variance<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ‰€æœ‰å› å­å¤šå„å˜é‡çš„è´¡çŒ®ç‡ä¸º"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>fa<span class="token punctuation">.</span>get_communalities<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment"># æ–¹å·®è´¡çŒ®ç‡</span>

ev<span class="token punctuation">,</span> v <span class="token operator">=</span> fa<span class="token punctuation">.</span>get_eigenvalues<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># åŸå§‹ç‰¹å¾å€¼å’Œå…¬å› å­ç‰¹å¾å€¼</span>
ratio<span class="token operator">=</span>np<span class="token punctuation">.</span>cumsum<span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token operator">/</span>np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span>  <span class="token comment"># æ–¹å·®è´¡çŒ®ç‡=è¯¥å› å­çš„ç‰¹å¾å€¼/æ‰€æœ‰å› å­ç‰¹å¾å€¼ä¹‹å’Œ</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ratio<span class="token punctuation">)</span>  <span class="token comment"># ç»˜ç‚¹</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ratio<span class="token punctuation">)</span>   <span class="token comment"># ç»˜æ›²çº¿</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Scree Plot'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Factors'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Eigenvalue'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># a</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment"># ç›¸å…³ç³»æ•°</span>

df_cm <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>np<span class="token punctuation">.</span><span class="token builtin">abs</span><span class="token punctuation">(</span>fa<span class="token punctuation">.</span>loadings_<span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>df_cm<span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"BuPu"</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_tick_params<span class="token punctuation">(</span>labelsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Factor Analysis'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token string">'xx-large'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Sepal Width'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token string">'xx-large'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'factorAnalysis.png'</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">)</span>
<span class="token comment"># é¢œè‰²è¶Šæ·±ï¼Œç›¸å…³ç¨‹åº¦è¶Šå¤§</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p><img src="/2022/05/01/duo-yuan-yin-zi-fen-xi/image-20220501102944518.png" alt="image-20220501102944518"></p>
<p><img src="/2022/05/01/duo-yuan-yin-zi-fen-xi/image-20220501102928221.png" alt="image-20220501102928221"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/30/duo-yuan-zhu-cheng-fen-fen-xi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/30/duo-yuan-zhu-cheng-fen-fen-xi/" class="post-title-link" itemprop="url">å¤šå…ƒç»Ÿè®¡ - ä¸»æˆåˆ†åˆ†æ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-30 20:03:41" itemprop="dateCreated datePublished" datetime="2022-04-30T20:03:41+08:00">2022-04-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-05-01 15:04:12" itemprop="dateModified" datetime="2022-05-01T15:04:12+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">å¤šå…ƒç»Ÿè®¡</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3><span id="ç¼ºå¤±å€¼è¡¥å…¨">ç¼ºå¤±å€¼è¡¥å…¨</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">imr <span class="token operator">=</span> SimpleImputer<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">,</span> missing_values<span class="token operator">=</span>nan<span class="token punctuation">,</span> strategy<span class="token operator">=</span><span class="token string">'mean'</span><span class="token punctuation">,</span> fill_value<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> imr<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token comment"># ç¼ºå¤±å€¼å ä½ç¬¦</span>
missing_values ï¼š <span class="token builtin">int</span>ã€<span class="token builtin">float</span>ã€<span class="token builtin">str</span>ã€np<span class="token punctuation">.</span>nan æˆ– <span class="token boolean">None</span>ï¼Œé»˜è®¤å€¼<span class="token operator">=</span>np<span class="token punctuation">.</span>nan


<span class="token comment"># è¡¥å…¨çš„æ–¹æ³• </span>
strategy ï¼š â€œmeanâ€ï¼ˆå¹³å‡å€¼ï¼‰ã€ â€œmedianâ€ï¼ˆä¸­ä½æ•°ï¼‰ã€â€œmost_frequentâ€ï¼ˆä½¿ç”¨æ¯åˆ—ä¸­æœ€é¢‘ç¹çš„å€¼æ›¿æ¢ç¼ºå¤±ï¼‰ã€â€œconstantâ€ï¼ˆæ’å®šå€¼ fill_valueï¼‰
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3><span id="ä¸»æˆåˆ†åˆ†æ">ä¸»æˆåˆ†åˆ†æ</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">sklearn<span class="token punctuation">.</span>decompositio<span class="token punctuation">.</span>PCA <span class="token punctuation">(</span> n_components <span class="token operator">=</span> <span class="token boolean">None</span> <span class="token punctuation">,</span> <span class="token operator">*</span> <span class="token punctuation">,</span> copy <span class="token operator">=</span> <span class="token boolean">True</span> <span class="token punctuation">,</span> whiten <span class="token operator">=</span> <span class="token boolean">False</span> <span class="token punctuation">,</span> svd_solver <span class="token operator">=</span> <span class="token string">'auto'</span> <span class="token punctuation">,</span> tol <span class="token operator">=</span> <span class="token number">0.0</span> <span class="token punctuation">,</span> iterated_power <span class="token operator">=</span> <span class="token string">'auto'</span> <span class="token punctuation">,</span> random_state <span class="token operator">=</span> <span class="token boolean">None</span> <span class="token punctuation">)</span>

<span class="token comment"># å‰©ä½™ç»„æ•° ï¼š n_components</span>
è‹¥ <span class="token number">0</span> <span class="token operator">&lt;</span> n_components <span class="token operator">&lt;</span> <span class="token number">1</span>ï¼Œåˆ™æ–¹å·®å’Œéœ€è¦å¤§äº n_components æ‰€æŒ‡å®šçš„é˜ˆå€¼ï¼ŒPCA ä¼šè‡ªåŠ¨åœ°é€‰æ‹©ä¸‹é™ç»´æ•°ï¼›ï¼ˆsvd_solver <span class="token operator">==</span> <span class="token string">'full'</span>ï¼‰
å¦‚æœ n_components å–æ•´æ•°ï¼Œåˆ™äº‹å…ˆæŒ‡å®šä¸»æˆåˆ†ä¸ªæ•°ã€‚

<span class="token comment"># æ˜¯å¦éœ€è¦å°†åŸå§‹è®­ç»ƒæ•°æ®å¤åˆ¶ copy :</span>
å¦‚æœä¸º <span class="token boolean">False</span>ï¼Œä¼ é€’ç»™ fit çš„æ•°æ®å°†è¢«è¦†ç›–å¹¶ä¸”è¿è¡Œ fit<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">(</span>X<span class="token punctuation">)</span> ä¸ä¼šäº§ç”Ÿé¢„æœŸçš„ç»“æœï¼Œè¦ç”¨ fit_transform<span class="token punctuation">(</span>X<span class="token punctuation">)</span>

<span class="token comment"># svd_solver == â€œautoâ€</span>
æ±‚è§£å™¨ç”±åŸºäºX<span class="token punctuation">.</span>shapeå’Œn_components çš„é»˜è®¤ç­–ç•¥é€‰æ‹©


å±æ€§ï¼š
pca<span class="token punctuation">.</span>components_ <span class="token punctuation">:</span> å„ä¸»æˆåˆ†çš„æƒå‘é‡ï¼Œ
pca<span class="token punctuation">.</span>n_components_ <span class="token punctuation">:</span> é€‰å‡ºçš„ä¸»æˆåˆ†é‡ ï¼Œå½“ n_components è®¾ç½®ä¸º <span class="token string">'mle'</span> æˆ– <span class="token number">0</span> åˆ° <span class="token number">1</span> ä¹‹é—´çš„æ•°å­—ï¼ˆä½¿ç”¨ svd_solver <span class="token operator">==</span> <span class="token string">'full'</span>ï¼‰æ—¶ï¼Œæ­¤æ•°å­—æ˜¯æ ¹æ®è¾“å…¥æ•°æ®ä¼°è®¡çš„
pca<span class="token punctuation">.</span>get_precision <span class="token punctuation">:</span> ç²¾åº¦
pca<span class="token punctuation">.</span>explained_variance_ratio_ <span class="token punctuation">:</span> æ–¹å·®ç™¾åˆ†æ¯”ï¼Œè´¡çŒ®ç‡<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3><span id="ä¸€-æ•°æ®é›†ç®€ä»‹">ä¸€ã€æ•°æ®é›†ç®€ä»‹</span></h3><blockquote>
<p>åŠå¯¼ä½“æ•°æ®ï¼ˆsecom.dataï¼‰ï¼Œæ‹¥æœ‰ 590 ä¸ªç‰¹å¾ã€‚</p>
</blockquote>
<blockquote>
<p>æ•™å¸ˆæ•°æ® (aaup.csv) è¯¥æ•°æ®æ¥è‡ªç¾å›½å¤§å­¦æ•™æˆåä¼š (AAUP) å¹´åº¦æ™®æŸ¥, åŒ…æ‹¬åˆ†åˆ«æŒ‰ç…§æ­£æ•™æˆå’Œå‰¯æ•™æˆçš„å¹³å‡å·¥èµ„å’Œè¡¥è´´ (1994 å¹´) ç»Ÿè®¡çš„æ•°æ®ã€‚ä¸€å…±æœ‰ 13 ä¸ªæ•°é‡å˜é‡: ASF (æ­£æ•™æˆå¹³å‡å·¥èµ„)ã€ ASA1 (å‰¯æ•™æˆå¹³å‡å·¥èµ„)ã€ ASA2 (åŠ©ç†æ•™æˆå¹³å‡å·¥èµ„)ã€ ASALL (æ‰€æœ‰çº§åˆ«å¹³å‡å·¥èµ„)ã€ ACF (æ­£æ•™æˆå¹³å‡è¡¥è´´)ã€ ACA1 (å‰¯æ•™æˆå¹³å‡è¡¥è´´)ã€ ACA2 (åŠ©ç†æ•™æˆå¹³å‡è¡¥è´´)ã€ ACALL (æ‰€æœ‰çº§åˆ«å¹³å‡è¡¥è´´)ã€ NF (æ­£æ•™æˆäººæ•°)ã€NA1 (å‰¯æ•™æˆäººæ•°)ã€ NA2 (åŠ©ç†æ•™æˆäººæ•°)ã€ NIN (åŠ©æ•™äººæ•°)ã€ NALL (æ‰€æœ‰çº§åˆ«æ•™æˆæ•°ç›®).è¯¥æ•°æ®æ¶‰åŠ 1161 ä¸ªå­¦æ ¡. </p>
</blockquote>
<p>(æ•°æ®ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://github.com/tangbingqing/multivariate-statistics-data">https://github.com/tangbingqing/multivariate-statistics-data</a>) </p>
<h3><span id="äºŒ-å®éªŒ">äºŒã€å®éªŒ</span></h3><p>1ã€(1)æ•°æ®é¢„å¤„ç†ï¼Œæœ¬æ•°æ®é›†å­˜åœ¨ç¼ºå¤±æ•°æ®ï¼Œå°†æ¯åˆ—çš„ç¼ºå¤±å€¼è¡¥å…¨ä¸ºè¯¥åˆ—çš„æ‰€æœ‰éç¼ºå¤±å€¼çš„å‡å€¼ã€‚</p>
<p>(2)ç”»å‡ºå´–åº•ç¢çŸ³å›¾ï¼Œè§‚å¯Ÿæ­¤å›¾çœ‹æ˜¯å¦ä¸ªä¸»æˆåˆ†çš„è´¡çŒ®ç‡çš„å·®å¼‚æƒ…å†µï¼›</p>
<p>(3)é€‰æ‹©ä¸åŒçš„é˜ˆå€¼ 0.7ï¼Œ0.8ï¼Œ0.9ï¼Œç­›é€‰å‡ºä¸åŒä¸ªæ•°çš„ä¸»æˆåˆ†ï¼›</p>
<p>(4)è®¡ç®—åœ¨ä¸åŒé˜ˆå€¼æ¡ä»¶ä¸‹å±æ€§çš„å‹ç¼©æ¯”ï¼Œå³ä¸»æˆåˆ†ä¸ªæ•°/æ‰€æœ‰åŸå§‹æ•°æ®çš„å±æ€§ä¸ªæ•°</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> random
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>impute <span class="token keyword">import</span> SimpleImputer

<span class="token keyword">import</span> sklearn<span class="token punctuation">.</span>decomposition <span class="token keyword">as</span> dp


data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">".\secom.data"</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">'\s+'</span><span class="token punctuation">)</span>

<span class="token comment"># ç¼ºå¤±å€¼å¤„ç†</span>
imr <span class="token operator">=</span> SimpleImputer<span class="token punctuation">(</span>missing_values<span class="token operator">=</span>np<span class="token punctuation">.</span>NaN<span class="token punctuation">,</span> strategy<span class="token operator">=</span><span class="token string">'mean'</span><span class="token punctuation">)</span> 
data <span class="token operator">=</span> imr<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

pca <span class="token operator">=</span> dp<span class="token punctuation">.</span>PCA<span class="token punctuation">(</span>n_components <span class="token operator">=</span> <span class="token number">0.9</span><span class="token punctuation">,</span> svd_solver<span class="token operator">=</span><span class="token string">'full'</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> pca<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
pca<span class="token punctuation">.</span>n_components
<span class="token keyword">print</span><span class="token punctuation">(</span>pca<span class="token punctuation">.</span>n_components_<span class="token punctuation">)</span>

<span class="token comment"># å´–åº•ç¢çŸ³å›¾</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
fig<span class="token punctuation">,</span>axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>pca<span class="token punctuation">.</span>explained_variance_ratio_<span class="token punctuation">)</span> <span class="token comment"># å•ä¸ªè´¡çŒ®ç‡</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>np<span class="token punctuation">.</span>cumsum<span class="token punctuation">(</span>pca<span class="token punctuation">.</span>explained_variance_ratio_<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># ç´¯è®¡è´¡çŒ®ç‡</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"å•ä¸ªè´¡çŒ®ç‡"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"ç´¯è®¡è´¡çŒ®ç‡"</span><span class="token punctuation">)</span>

<span class="token comment"># ç­›é€‰ä¸åŒä¸ªæ•°çš„ä¸»æˆåˆ†,å‹ç¼©æ¯”</span>
y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.70</span><span class="token punctuation">,</span><span class="token number">0.80</span><span class="token punctuation">,</span><span class="token number">0.95</span><span class="token punctuation">]</span>
coms <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
yasuobi <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> y<span class="token punctuation">:</span>
    pca <span class="token operator">=</span> dp<span class="token punctuation">.</span>PCA<span class="token punctuation">(</span>n_components<span class="token operator">=</span>i<span class="token punctuation">)</span>
    reduced <span class="token operator">=</span> pca<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    coms<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pca<span class="token punctuation">.</span>n_components_<span class="token punctuation">)</span>   <span class="token comment"># ä¸åŒä¸ªæ•°çš„ä¸»æˆåˆ†</span>
    yasuobi<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>pca<span class="token punctuation">.</span>explained_variance_ratio_<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>pca<span class="token punctuation">.</span>n_components_<span class="token operator">/</span><span class="token number">590</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># ä¿¡æ¯é‡å æ¯”</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>coms<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>yasuobi<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/2022/04/30/duo-yuan-zhu-cheng-fen-fen-xi/image-20220430203945375.png" alt="image-20220430203945375"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/30/duo-yuan-ju-lei/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/30/duo-yuan-ju-lei/" class="post-title-link" itemprop="url">å¤šå…ƒç»Ÿè®¡ - èšç±»</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-30 16:10:41" itemprop="dateCreated datePublished" datetime="2022-04-30T16:10:41+08:00">2022-04-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-05-01 16:28:41" itemprop="dateModified" datetime="2022-05-01T16:28:41+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">å¤šå…ƒç»Ÿè®¡</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3><span id="å±‚æ¬¡èšç±»">å±‚æ¬¡èšç±»</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> scipy<span class="token punctuation">.</span>cluster<span class="token punctuation">.</span>hierarchy <span class="token keyword">import</span> linkage<span class="token punctuation">,</span>dendorgram<span class="token punctuation">,</span>fcluster


<span class="token comment"># æ‰§è¡Œåˆ†å±‚/å‡èšèšç±»</span>

scipy<span class="token punctuation">.</span>cluster<span class="token punctuation">.</span>hierarchy<span class="token punctuation">.</span>linkage<span class="token punctuation">(</span>y<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'single'</span><span class="token punctuation">,</span> metric<span class="token operator">=</span><span class="token string">'euclidean'</span><span class="token punctuation">,</span> optimal_ordering<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token comment">### method : è®¡ç®—å½¢æˆçš„ç±»ä¹‹é—´è·ç¦»</span>
    singleï¼ˆæœ€è¿‘ç‚¹ç®—æ³•ï¼‰ã€completeï¼ˆæœ€è¿œç‚¹ç®—æ³•ï¼‰ã€averageï¼ˆå¹³å‡ï¼‰ã€weightedï¼ˆåŠ æƒï¼‰ã€centroidï¼ˆé‡å¿ƒï¼‰ã€medianï¼ˆä¸­ä½æ•°ï¼‰ã€wardï¼ˆæ–¹å·®æœ€å°åŒ–ç®—æ³•ï¼‰
<span class="token comment">### metric ï¼šè®¡ç®—è·ç¦»çš„æ–¹æ³•</span>
    â€™euclideanâ€™ï¼ˆæ¬§å‡ é‡Œå¾—ï¼‰ï¼Œâ€™l1â€™ï¼Œâ€™l2â€™ï¼Œâ€™mantattanâ€™ï¼ˆæ›¼å“ˆé¡¿ï¼‰ï¼Œâ€™cosineâ€™ï¼ˆä½™å¼¦ï¼‰ï¼Œâ€™precomputedâ€™ï¼ˆé¢„å…ˆè®¡ç®—ï¼‰

<span class="token comment"># ps : å¦‚æœlinkage=â€™wardâ€™ï¼Œåˆ™metricå¿…é¡»ä¸ºâ€™euclideanâ€™</span>



<span class="token comment"># ä»ç»™å®šçš„é“¾æ¥çŸ©é˜µå®šä¹‰çš„å±‚æ¬¡èšç±»ä¸­å½¢æˆå¹³é¢èšç±»</span>

fcluster<span class="token punctuation">(</span>Z<span class="token punctuation">,</span> t<span class="token punctuation">,</span> criterion<span class="token operator">=</span><span class="token string">'inconsistent'</span><span class="token punctuation">,</span> depth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> R<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> monocrit<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
<span class="token comment">### Z ï¼š ndarray ï¼Œlinkageç”¨å‡½æ•°è¿”å›çš„çŸ©é˜µç¼–ç çš„å±‚æ¬¡èšç±»</span>
<span class="token comment">### t ï¼š å½¢æˆæ‰å¹³é›†ç¾¤æ—¶åº”ç”¨çš„é˜ˆå€¼</span>



<span class="token comment"># å±‚æ¬¡èšç±»ç»˜åˆ¶ä¸ºæ ‘çŠ¶å›¾</span>

dendrogram <span class="token punctuation">(</span>Z<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3><span id="ä¸€-æ•°æ®é›†ç®€ä»‹">ä¸€ã€æ•°æ®é›†ç®€ä»‹</span></h3><blockquote>
<p>ä¸–ç•Œé“¶è¡Œæ ·æœ¬æ•°æ®é›†ï¼šWBClust2013.csv</p>
<p>äºšé©¬é€Šé›¨æ—ï¼ˆ1999ï½2010 å¹´ï¼‰çš„æ•°æ®é›†ï¼šNASAUnderstory.csv</p>
</blockquote>
<p>(æ•°æ®ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://github.com/tangbingqing/multivariate-statistics-data">https://github.com/tangbingqing/multivariate-statistics-data</a>) </p>
<h3><span id="äºŒ-å®éªŒ">äºŒã€å®éªŒ</span></h3><p>1ã€é€‰æ‹©ä¸åŒçš„æ ·æœ¬é—´ä¸¾ä¾‹æˆ–ç±»é—´è·ç¦»å¹¶è§‚å¯Ÿèšç±»åçš„è°±ç³»å›¾çš„å˜åŒ–æƒ…å†µ</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> scipy<span class="token punctuation">.</span>cluster<span class="token punctuation">.</span>hierarchy <span class="token keyword">import</span> dendrogram<span class="token punctuation">,</span>linkage<span class="token punctuation">,</span>fcluster
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler

data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"WBClust2013.csv"</span><span class="token punctuation">,</span>header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>index_col<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># æ ‡å‡†å½’ä¸€åŒ–</span>
scal <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> scal<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token comment"># èšç±»ç»“æœ</span>
metric <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'cityblock'</span><span class="token punctuation">,</span><span class="token string">'euclidean'</span><span class="token punctuation">,</span><span class="token string">'chebyshev'</span><span class="token punctuation">,</span><span class="token string">'canberra'</span><span class="token punctuation">,</span><span class="token string">'hamming'</span><span class="token punctuation">,</span><span class="token string">'minkowski'</span><span class="token punctuation">]</span>
n <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"æ›¼å“ˆé¡¿"</span><span class="token punctuation">,</span><span class="token string">"æ¬§å‡ é‡Œå¾—"</span><span class="token punctuation">,</span><span class="token string">"åˆ‡æ¯”é›ªå¤«"</span><span class="token punctuation">,</span><span class="token string">"å ªåŸ¹æ‹‰"</span><span class="token punctuation">,</span><span class="token string">"æ±‰æ˜è·ç¦»"</span><span class="token punctuation">,</span><span class="token string">"é—µæ°"</span><span class="token punctuation">]</span>



plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>


<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    Z <span class="token operator">=</span> linkage<span class="token punctuation">(</span>data<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'single'</span><span class="token punctuation">,</span> metric <span class="token operator">=</span> metric<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    dn <span class="token operator">=</span> dendrogram<span class="token punctuation">(</span>Z<span class="token punctuation">)</span>  <span class="token comment"># åˆ¶ä½œè°±ç³»å›¾</span>
    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span>n<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>å…¶ä¸­ä¸€ä¸ªä¾‹å­ï¼š</p>
<p><img src="/2022/04/30/duo-yuan-ju-lei/image-20220430163740478.png" alt="image-20220430163740478"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/29/duo-yuan-fen-lei/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/29/duo-yuan-fen-lei/" class="post-title-link" itemprop="url">å¤šå…ƒç»Ÿè®¡ - åˆ†ç±»</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-29 16:03:41" itemprop="dateCreated datePublished" datetime="2022-04-29T16:03:41+08:00">2022-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-05-01 11:13:35" itemprop="dateModified" datetime="2022-05-01T11:13:35+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">å¤šå…ƒç»Ÿè®¡</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3><span id="ä¸€-æ•°æ®é›†ç®€ä»‹">ä¸€ã€æ•°æ®é›†ç®€ä»‹</span></h3><blockquote>
<p>pendigitsæ•°æ®é›†é‡Œæ˜¯å·²ç»å¤„ç†è¿‡çš„å›¾åƒç‰¹å¾ï¼Œæ¯ç»„æ•°æ®å…±æœ‰17ä¸ªï¼Œå…¶ä¸­å‰16ä¸ªæ˜¯å¤„ç†è¿‡çš„æ•°å­—çš„ç‰¹å¾ï¼Œç¬¬17ä¸ªæ˜¯æ•°æ®æ ‡ç­¾ï¼ˆ0ï½9ï¼‰ï¼Œä¹Ÿå³ä¸ºå¯¹åº”çš„æ•°å­—ã€‚</p>
</blockquote>
<p>(æ•°æ®ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://github.com/tangbingqing/multivariate-statistics-data">https://github.com/tangbingqing/multivariate-statistics-data</a>) </p>
<h3><span id="äºŒ-å®éªŒ">äºŒã€å®éªŒ</span></h3><p>1ã€è¯»å–æ•°æ®é›†åˆ pendigits.csv ï¼Œå¹¶å°†å…¶éšæœºæŒ‰ç…§ 1:5 çš„æ¯”ä¾‹åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œä¼°è®¡æ¨¡å‹çš„åˆ†ç±»å‡†ç¡®ç‡ã€‚</p>
<p>ï¼ˆæ•°æ®å¹¶ä¸ç¨€ç–ï¼‰</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> sklearn <span class="token keyword">import</span> discriminant_analysis <span class="token keyword">as</span> da
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split

data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"pendigits.csv"</span><span class="token punctuation">)</span>

X <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">16</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">]</span>

x_train<span class="token punctuation">,</span>x_test<span class="token punctuation">,</span>y_train<span class="token punctuation">,</span>y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span>y<span class="token punctuation">,</span>train_size<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>

model <span class="token operator">=</span> da<span class="token punctuation">.</span>LinearDiscriminantAnalysis<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># éƒ½ä¸ºé»˜è®¤å€¼</span>
model<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x_train<span class="token punctuation">,</span>y_train<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%.2f"</span> <span class="token operator">%</span> model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x_train<span class="token punctuation">,</span>y_train<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%.2f"</span> <span class="token operator">%</span> model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x_test<span class="token punctuation">,</span>y_test<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>2ã€åˆ©ç”¨åæŠ˜äº¤å‰éªŒè¯å’Œ Fisher çº¿æ€§åˆ¤åˆ«å‡†åˆ™å¯¹æ•°æ®é›† LDA-sparse_data è¿›è¡Œå»ºæ¨¡ï¼Œå¹¶è§‚å¯ŸæŒ‡å®šæ¨¡å‹ä¸­ç›¸å…³è¾“å…¥å‚æ•° shrinkage çš„å–å€¼ä¸ä¸æŒ‡å®šè¯¥å‚æ•°å–å€¼æ—¶æ¨¡å‹å‰åä¹‹é—´çš„å·®å¼‚ã€‚</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> KFold
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> cross_val_score

data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"LDA-sparse_data.csv"</span><span class="token punctuation">)</span>
<span class="token comment">### data =  pd.read_excel(r".LDA-sparse_data.xlsx",sheet_name="Sheet1")</span>

X <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token number">698</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">698</span><span class="token punctuation">]</span>

R <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
shrinkages <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">,</span>num<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> shrinkages<span class="token punctuation">:</span>
    model <span class="token operator">=</span> da<span class="token punctuation">.</span>LinearDiscriminantAnalysis<span class="token punctuation">(</span>solver<span class="token operator">=</span><span class="token string">"lsqr"</span><span class="token punctuation">,</span>shrinkage<span class="token operator">=</span>i<span class="token punctuation">)</span>
    kfolds <span class="token operator">=</span> KFold<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span>shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    score <span class="token operator">=</span> cross_val_score<span class="token punctuation">(</span>model<span class="token punctuation">,</span>X<span class="token punctuation">,</span>y<span class="token punctuation">,</span>cv <span class="token operator">=</span>kfolds<span class="token punctuation">)</span>
    R<span class="token punctuation">.</span>append<span class="token punctuation">(</span>score<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># ä¸æŒ‡å®šå‚æ•°</span>
model <span class="token operator">=</span> da<span class="token punctuation">.</span>LinearDiscriminantAnalysis<span class="token punctuation">(</span><span class="token punctuation">)</span>
kfolds <span class="token operator">=</span> KFold<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span>shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
score <span class="token operator">=</span> cross_val_score<span class="token punctuation">(</span>model<span class="token punctuation">,</span>X<span class="token punctuation">,</span>y<span class="token punctuation">,</span>cv <span class="token operator">=</span>kfolds<span class="token punctuation">)</span>
R<span class="token punctuation">.</span>append<span class="token punctuation">(</span>score<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

 <span class="token punctuation">[</span><span class="token number">0.6245833333333334</span><span class="token punctuation">,</span>
 <span class="token number">0.6191666666666666</span><span class="token punctuation">,</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token number">0.625</span><span class="token punctuation">,</span>
 <span class="token number">0.5070833333333333</span><span class="token punctuation">,</span>
 <span class="token number">0.8270833333333334</span><span class="token punctuation">]</span>
 <span class="token comment"># å¥½åƒä¸æŒ‡å®šå‚æ•°ï¼Œæ›´å‡†ç¡®ä¸€ç‚¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>3ã€</p>
<p>ï¼ˆ1ï¼‰è¯»å–æ•°æ®é›† banana.datï¼Œå¹¶åœ¨äºŒç»´åæ ‡ç³»ä¸­ç»˜åˆ¶è¯¥æ•°æ®é›†çš„æ•£ç‚¹å›¾ï¼Œå…¶ä¸­ä¸¤ç±»æ•°æ®åˆ†åˆ«ä½¿ç”¨ä¸¤ç§ä¸åŒé¢œè‰²çš„ç‚¹è¡¨ç¤ºï¼›</p>
<p>ï¼ˆ2ï¼‰åˆ©ç”¨åæŠ˜äº¤å‰éªŒè¯å’Œ Fisher çº¿æ€§åˆ¤åˆ«æ³•å¯¹è¯¥æ•°æ®é›†è¿›è¡Œå»ºæ¨¡ï¼Œå¹¶è§‚å¯Ÿåˆ†ç±»å‡†ç¡®ç‡æ˜¯å¦è¾ƒé«˜ï¼Ÿ</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns

data <span class="token operator">=</span>  pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"banana.dat"</span><span class="token punctuation">)</span>

<span class="token comment"># æ•£ç‚¹å›¾</span>
x1 <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'At1'</span><span class="token punctuation">]</span>
x2 <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">' At2'</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">' Class'</span><span class="token punctuation">]</span>
sns<span class="token punctuation">.</span>scatterplot<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span>hue<span class="token operator">=</span>y<span class="token punctuation">)</span>

<span class="token comment"># å»ºæ¨¡</span>
X <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>

model <span class="token operator">=</span> da<span class="token punctuation">.</span>LinearDiscriminantAnalysis<span class="token punctuation">(</span><span class="token punctuation">)</span>
kfolds <span class="token operator">=</span> KFold<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span>shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
score <span class="token operator">=</span> cross_val_score<span class="token punctuation">(</span>model<span class="token punctuation">,</span>X<span class="token punctuation">,</span>y<span class="token punctuation">,</span>cv <span class="token operator">=</span> kfolds<span class="token punctuation">)</span>
score <span class="token operator">=</span> score<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å‡†ç¡®ç‡ï¼š"</span><span class="token punctuation">,</span>score<span class="token punctuation">)</span>  
<span class="token comment">#å‡†ç¡®ç‡ (å¥½åƒåªæœ‰0.55)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/2022/04/29/duo-yuan-fen-lei/image-20220429214113362.png" alt="image-20220429214113362"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/24/duo-yuan-hui-gui/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/24/duo-yuan-hui-gui/" class="post-title-link" itemprop="url">å¤šå…ƒç»Ÿè®¡ - å›å½’</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-24 16:03:41" itemprop="dateCreated datePublished" datetime="2022-04-24T16:03:41+08:00">2022-04-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-05-01 11:13:21" itemprop="dateModified" datetime="2022-05-01T11:13:21+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">å¤šå…ƒç»Ÿè®¡</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3><span id="ä¸€-æ•°æ®é›†ç®€ä»‹">ä¸€ã€æ•°æ®é›†ç®€ä»‹</span></h3><blockquote>
<p>åŸå§‹æ•°æ®æœ‰ 14 ä¸ªå˜é‡çš„ 506 ä¸ªè§‚å¯Ÿå€¼ï¼Œå…¶ä¸­ï¼Œmedv(è‡ªä½æˆ¿å±‹æˆ¿ä»·ä¸­ä½æ•°ï¼Œå•ä½:åƒç¾å…ƒ)æ˜¯åŸå§‹çš„ç›®æ ‡å˜é‡ï¼Œå…¶ä»–å˜é‡åŒ…æ‹¬:crim(åŸé•‡çš„äººå‡çŠ¯ç½ªç‡)ã€mn(å åœ°é¢ç§¯è¶…è¿‡ 25000 å¹³æ–¹è‹±å°ºçš„ä½å®…ç”¨åœ°çš„æ¯”ä¾‹)ã€indus(æ¯ä¸ªé•‡çš„éé›¶å”®ä¸šåŠ¡æ¯”ä¾‹ï¼Œå•ä½:è‹±äº©)ã€chas(æœ‰å…³æŸ¥å°”æ–¯æ²³çš„è™šæ‹Ÿå˜é‡ï¼Œå¦‚æœæŒ¨ç€æ²³ä¸º1ï¼Œå¦åˆ™ä¸º0)ã€mo(ä¸€æ°§åŒ–æ°®æµ“åº¦ï¼Œå•ä½:Ppm)ã€m(å¹³å‡æ¯é—´ä½æˆ¿çš„æˆ¿é—´æ•°é‡)ã€age(1940 å¹´ä»¥å‰å»ºæˆçš„è‡ªä½å•ä½çš„æˆ¿é¾„æ¯”ä¾‹)ã€dis(äº”ä¸ªæ³¢åœŸé¡¿å°±ä¸šä¸­å¿ƒçš„åŠ æƒè·ç¦»)ã€rad(é«˜é€Ÿå…¬è·¯çš„å¯è¾¾æ€§æŒ‡æ•°)ã€tax(æ¯ä¸‡ç¾å…ƒå…¨ä»·ç‰©ä¸šå€¼çš„è´¢äº§ç¨ç‡)ã€ptratio(åŸé•‡å­¦ç”Ÿä¸æ•™å¸ˆçš„æ¯”ä¾‹)ã€b(=100078-0.63)2ï¼Œå…¶ä¸­çš„ B æ˜¯åŸé•‡é»‘äººçš„æ¯”ä¾‹)ã€Istat(ä½æ”¶å…¥äººå£æ¯”ä¾‹);æ›´æ­£è¿‡çš„æ•°æ®é›†æœ‰ä»¥ä¸‹é™„åŠ å˜é‡:cmed(ä¿®æ­£äº†çš„è‡ªä½æˆ¿ä»·ä¸­ä½æ•°ï¼Œå•ä½:åƒç¾å…ƒ)ã€tow(é•‡åç§°)ã€trat(äººå£æ™®æŸ¥åŒº)ã€lon(äººå£æ™®æŸ¥åŒºçš„ç»åº¦)ã€lat(äººå£æ™®æŸ¥åŒºçš„çº¬åº¦)ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å°†ç”¨ <strong>comedy</strong>(ä¿®æ­£äº†çš„è‡ªä½æˆ¿å±‹æˆ¿ä»·ä¸­ä½æ•°)ä½œä¸º<strong>å› å˜é‡</strong>ï¼Œ è€Œå°† crimï¼Œznï¼Œindusï¼Œnoxï¼Œrmï¼Œageï¼Œdisï¼Œradï¼Œtaxï¼Œptratioï¼Œbï¼Œlstat è¿™<strong>12</strong>ä¸ªå˜é‡ä½œä¸º<strong>è‡ªå˜é‡</strong>ã€‚(æ•°æ®ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://github.com/tangbingqing/multivariate-statistics-data">https://github.com/tangbingqing/multivariate-statistics-data</a>) </p>
<h3><span id="äºŒ-å®éªŒ">äºŒã€å®éªŒ</span></h3><p>1ã€éšæœºåœ°å°†å½“å‰æ•°æ®é›†æŒ‰ç…§ <strong>3:1</strong> çš„å®¹é‡æ¯”ä¾‹åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œé‡å¤æ­¤æ­¥éª¤åæ¬¡ï¼Œå¹¶å°†å¾—åˆ°åæ¬¡ç»“æœåˆ¶ä½œå¦‚ä¸‹çš„æŠ˜çº¿å›¾ï¼Œå…¶ä¸­æ¨ªåæ ‡ä¸ºæ¬¡æ•°ï¼Œçºµåæ ‡ä¸ºå¯¹åº”æ¬¡æ•°çš„å¯å†³ç³»æ•°ã€‚</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> random

<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> LinearRegression
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> KFold  <span class="token comment"># äº¤å‰éªŒè¯</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> cross_val_score  <span class="token comment"># æ¨¡å‹ç²¾åº¦</span>

model <span class="token operator">=</span> LinearRegression<span class="token punctuation">(</span><span class="token punctuation">)</span>
R <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    X_train<span class="token punctuation">,</span>X_test<span class="token punctuation">,</span>y_train<span class="token punctuation">,</span>y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span>y<span class="token punctuation">,</span>train_size<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>
    model<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span>y_train<span class="token punctuation">)</span>
    R<span class="token punctuation">.</span>append<span class="token punctuation">(</span>model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>X_test<span class="token punctuation">,</span>y_test<span class="token punctuation">)</span><span class="token punctuation">)</span>

x_label <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylim<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x_label<span class="token punctuation">,</span> R<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><img src="/2022/04/24/duo-yuan-hui-gui/image-20220424161429912.png" alt="image-20220424161429912"></p>
<p>2ã€<strong>æœ€ä¼˜å›å½’æ–¹ç¨‹çš„é€‰æ‹©</strong>ï¼šä» 12 ä¸ªè‡ªå˜é‡ä¸­éšæœºçš„æŠ½å– <em>n</em>ï¼ˆå…¶ä¸­n=2,â€¦..12ï¼‰ä¸ªè‡ªå˜é‡ï¼Œå¹¶åˆ©ç”¨åæŠ˜äº¤å‰éªŒè¯è®¡ç®—æ‰€å»ºæ¨¡å‹çš„å¯å†³ç³»æ•°ï¼Œä¾æ®ä»¥ä¸Š 12 ä¸ªæ¨¡å‹çš„å¯å†³ç³»æ•°å¤§å°ç¡®å®šå“ªä¸€ä¸ªæ¨¡å‹çš„é¢„æµ‹ç²¾åº¦è¾ƒé«˜ã€‚ï¼ˆ<strong>å¹¶ä¸ä¸€å®šä½¿ç”¨å…¨éƒ¨è‡ªå˜é‡çš„æ¨¡å‹ç²¾åº¦æœ€å¥½</strong>ï¼‰ </p>
<blockquote>
<p>sklearn.model_selection.cross_val_score (estimator, <em>X</em> , <em>y = None</em> ,  <em>score</em> <em>=</em> <em>None</em> , <em>cv</em> <em>=</em> <em>None</em>  )</p>
<p>estimator:ä¼°è®¡å™¨</p>
<p>x : è¦æ‹Ÿåˆçš„æ•°æ®</p>
<p>y : å°è¯•é¢„æµ‹çš„ç›®æ ‡å˜é‡</p>
<p>cv : ç¡®å®šäº¤å‰éªŒè¯æ‹†åˆ†ç­–ç•¥ã€‚cv çš„å¯èƒ½è¾“å…¥æ˜¯ï¼š<code>None</code>, ä½¿ç”¨é»˜è®¤çš„ 5 æŠ˜äº¤å‰éªŒè¯ ; intï¼ŒæŒ‡å®š a ä¸­çš„æŠ˜å æ•°<code>(Stratified)KFold</code></p>
</blockquote>
<blockquote>
<p>sklearn.model_selection.KFold ( <em>n_splits = 5</em> , <em>shuffle = False</em> , <em>random_state = None</em> )</p>
</blockquote>
<h4><span id="åŒºåˆ«">åŒºåˆ«:</span></h4><p>kfold : åªæ˜¯å°†æ•°æ®é›†åˆ’åˆ†ä¸ºK-æŠ˜ï¼Œåªæ˜¯åˆ’åˆ†æ•°æ®é›†</p>
<p>cross_val_score ï¼š æ ¹æ®æ¨¡å‹è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—äº¤å‰éªŒè¯çš„ç»“æœ</p>
<p>LinearRegression().score(X, y) : score è®¡ç®—è¿™ä¸ªçš„æ¨¡å‹çš„å¯å†³ç³»æ•°ï¼Œæ˜¯æ¨¡å‹è‡ªå¸¦çš„æ–¹æ³•</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">R <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

model <span class="token operator">=</span> LinearRegression<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    label <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>
    kfolds <span class="token operator">=</span> KFold<span class="token punctuation">(</span>i<span class="token punctuation">,</span>shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> train<span class="token punctuation">,</span>test <span class="token keyword">in</span> kfolds<span class="token punctuation">.</span>split<span class="token punctuation">(</span>X<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        model<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span>test<span class="token punctuation">]</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span>test<span class="token punctuation">]</span><span class="token punctuation">)</span>
        R<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>X<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span>test<span class="token punctuation">]</span><span class="token punctuation">,</span>y<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span>test<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>test<span class="token punctuation">)</span><span class="token punctuation">)</span>

R<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> tup<span class="token punctuation">:</span> tup<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-python" data-language="python"><code class="language-python">R <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
model <span class="token operator">=</span> LinearRegression<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    label <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>
    kfolds <span class="token operator">=</span> KFold<span class="token punctuation">(</span>i<span class="token punctuation">,</span>shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    xx <span class="token operator">=</span> X<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>label<span class="token punctuation">]</span>
    score <span class="token operator">=</span> cross_val_score<span class="token punctuation">(</span>model<span class="token punctuation">,</span>xx<span class="token punctuation">,</span>y<span class="token punctuation">,</span>cv <span class="token operator">=</span>kfolds<span class="token punctuation">)</span>  
    R<span class="token punctuation">.</span>append<span class="token punctuation">(</span>score<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>3ã€å²­å›å½’ã€Lasso å›å½’æ¨¡å‹ä¸­å…³é”®æ­£åˆ™å‚æ•°ğ›Œçš„é€‰æ‹©ï¼šåœ¨ç»™å®šå‚æ•°ğ›Œ çš„ 0.01ï¼Œ0.1ï¼Œ0.2, 0.5, 1 è¿™äº”ä¸ªå¯èƒ½æ€§å–å€¼çš„æ¡ä»¶ä¸‹ï¼Œåˆ©ç”¨åæŠ˜äº¤å‰éªŒè¯å’Œå¯å†³ç³»æ•°ç¡®å®šä¸¤ä¸ªæ¨¡å‹çš„å„è‡ªæœ€ä¼˜å‚æ•°?</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">lamda <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.01</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.2</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token comment"># å²­å›å½’</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> Ridge<span class="token punctuation">,</span>RidgeCV
kfolds <span class="token operator">=</span> KFold<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span>shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

R1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> l <span class="token keyword">in</span> lamda<span class="token punctuation">:</span>
    model <span class="token operator">=</span> Ridge<span class="token punctuation">(</span>alpha<span class="token operator">=</span>l<span class="token punctuation">,</span>fit_intercept<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    score <span class="token operator">=</span> cross_val_score<span class="token punctuation">(</span>model<span class="token punctuation">,</span>X<span class="token punctuation">,</span>y<span class="token punctuation">,</span>cv<span class="token operator">=</span>kfolds<span class="token punctuation">)</span>
    R1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>score<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># l = 1 æ—¶ï¼Œæœ€å¥½</span>


<span class="token comment"># Lassoå›å½’</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> Lasso
R2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> l <span class="token keyword">in</span> lamda<span class="token punctuation">:</span>
    model <span class="token operator">=</span> Lasso<span class="token punctuation">(</span>alpha<span class="token operator">=</span>l<span class="token punctuation">,</span>fit_intercept<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    score <span class="token operator">=</span> cross_val_score<span class="token punctuation">(</span>model<span class="token punctuation">,</span>X<span class="token punctuation">,</span>y<span class="token punctuation">,</span>cv<span class="token operator">=</span>kfolds<span class="token punctuation">)</span>
    R2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>score<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># l = 0.2 æ—¶ï¼Œæœ€å¥½</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/22/hua-tu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/22/hua-tu/" class="post-title-link" itemprop="url">å¤šå…ƒç»Ÿè®¡ - ç”»å›¾</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-22 22:53:41 / ä¿®æ”¹æ—¶é—´ï¼š22:53:55" itemprop="dateCreated datePublished" datetime="2022-04-22T22:53:41+08:00">2022-04-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">å¤šå…ƒç»Ÿè®¡</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>æ•°æ®ä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://github.com/tangbingqing/multivariate-statistics-data">https://github.com/tangbingqing/multivariate-statistics-data</a></p>
<p>è½®å»“å›¾å’Œè°ƒå’Œæ›²çº¿å›¾æœ‰ç€ç›¸è¿‘çš„åŠŸèƒ½ï¼Œè½®å»“å›¾ç®€å•å´ç°å¾—ç²—ç³™ï¼Œè°ƒå’Œæ›²çº¿å›¾å…¬å¼å¤æ‚å´ååˆ†ç²¾ç»†ã€‚</p>
<p>å‡å¯ç”¨äºèšç±»åˆ†æï¼šåŒç±»æ›²çº¿èšåœ¨ä¸€èµ·ï¼Œä¸åŒç±»ä¸åŒæŸ</p>
<h2><span id="ä¸€-è½®å»“å›¾">ä¸€ã€è½®å»“å›¾</span></h2><p>åœ¨äºŒç»´ç›´è§’åæ ‡ç³»ä¸­ï¼Œå°†næ¬¡è§‚æµ‹å€¼å¯ç”»å‡ºnæ¡æŠ˜çº¿æ„æˆè½®å»“å›¾ï¼Œå…¶ä¸­æ¨ªåæ ‡è¡¨ç¤ºå„ä¸ªå˜é‡<strong>ï¼Œ</strong>çºµåæ ‡è¡¨ç¤º<strong>ä¸å˜é‡å–å€¼æˆæ­£æ¯”çš„æ•°å€¼</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"iris.data"</span><span class="token punctuation">)</span>   <span class="token comment"># å°¾é¸¢èŠ±æ•°æ®</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
pd<span class="token punctuation">.</span>plotting<span class="token punctuation">.</span>parallel_coordinates<span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token string">'species'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/2022/04/22/hua-tu/image-20220422184138691.png" alt="image-20220422184138691"></p>
<h2><span id="äºŒ-è°ƒå’Œæ›²çº¿å›¾">äºŒã€è°ƒå’Œæ›²çº¿å›¾</span></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pandas<span class="token punctuation">.</span>plotting <span class="token keyword">import</span> andrews_curves

data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">r"iris.data"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
andrews_curves<span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token string">'species'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><img src="/2022/04/22/hua-tu/image-20220422184428930.png" alt="image-20220422184428930"></p>
<h2><span id="ä¸‰-é›·è¾¾å›¾">ä¸‰ã€é›·è¾¾å›¾</span></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'SimHei'</span>
matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
labels <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'ç»¼åˆ'</span><span class="token punctuation">,</span><span class="token string">'ç¬¬ä¸€å‘¨'</span><span class="token punctuation">,</span><span class="token string">'ç¬¬äºŒå‘¨'</span><span class="token punctuation">,</span><span class="token string">'ç¬¬ä¸‰å‘¨'</span><span class="token punctuation">,</span><span class="token string">'ç¬¬å››å‘¨'</span><span class="token punctuation">,</span><span class="token string">'ç¬¬äº”å‘¨'</span><span class="token punctuation">,</span><span class="token string">'ç¬¬å…­å‘¨'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
score <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">88.7</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">95</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">96</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

nAttr <span class="token operator">=</span> <span class="token number">6</span>  <span class="token comment"># å…±6ç»„</span>
angles<span class="token operator">=</span>np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span>nAttr<span class="token punctuation">,</span>endpoint<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

Python<span class="token operator">=</span>np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span>score<span class="token punctuation">,</span><span class="token punctuation">[</span>score<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># é—­åˆ</span>
angles<span class="token operator">=</span>np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span>angles<span class="token punctuation">,</span><span class="token punctuation">[</span>angles<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#é—­åˆ</span>

fig<span class="token operator">=</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>facecolor<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">)</span>   <span class="token comment"># èƒŒæ™¯é¢œè‰²ï¼Œç™½è‰²</span>

plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span>polar<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>angles<span class="token punctuation">,</span>Python<span class="token punctuation">,</span><span class="token string">'bo-'</span><span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span>linewidth<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># ç»¿è‰²è¾¹æ¡†</span>
plt<span class="token punctuation">.</span>fill<span class="token punctuation">(</span>angles<span class="token punctuation">,</span>Python<span class="token punctuation">,</span>facecolor<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">,</span>alpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>  <span class="token comment">#ç»¿è‰²èƒŒæ™¯å¡«å……</span>
plt<span class="token punctuation">.</span>thetagrids<span class="token punctuation">(</span>angles<span class="token operator">*</span><span class="token number">180</span><span class="token operator">/</span>np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span>labels<span class="token punctuation">)</span>  <span class="token comment"># æ ‡ç­¾</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p><img src="/2022/04/22/hua-tu/image-20220422185927468.png" alt="image-20220422185927468"></p>
<h2><span id="å››-æ•£å¸ƒçŸ©é˜µå›¾">å››ã€æ•£å¸ƒçŸ©é˜µå›¾</span></h2><p>å±•ç¤ºæ¯ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³æƒ…å†µ</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pandas<span class="token punctuation">.</span>plotting <span class="token keyword">import</span> scatter_matrix

pd_data<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">"iris.data"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
scatter_matrix<span class="token punctuation">(</span>pd_data<span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><img src="/2022/04/22/hua-tu/image-20220422200043112.png" alt="image-20220422200043112"></p>
<h2><span id="å®éªŒ">å®éªŒ</span></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># (1)åˆ†åˆ«ç»˜åˆ¶ OXY ä¸ time å’Œ age çš„æ•£å¸ƒå›¾</span>
<span class="token keyword">from</span> pandas<span class="token punctuation">.</span>plotting <span class="token keyword">import</span> scatter_matrix

data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'peo.txt'</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">'\s+'</span><span class="token punctuation">)</span>
da_ti_ag <span class="token operator">=</span> data<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">"time"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token string">"OXY"</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
scatter_matrix<span class="token punctuation">(</span>da_ti_ag<span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># (2) 1,2,21,22 çš„ 4 ä¸ªäººçš„è°ƒå’Œæ›²çº¿å›¾(æ”¾åœ¨åŒä¸€å¼ å›¾ä¸Š)</span>

<span class="token keyword">from</span> pandas<span class="token punctuation">.</span>plotting <span class="token keyword">import</span> andrews_curves

matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span><span class="token boolean">False</span>  <span class="token comment"># æ˜¾ç¤ºè´Ÿå·</span>
data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'peo.txt'</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">'\s+'</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
da_ti_ag <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
andrews_curves<span class="token punctuation">(</span>da_ti_ag<span class="token punctuation">,</span><span class="token string">"OXY"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p><img src="/2022/04/22/hua-tu/image-20220422202553681.png" alt="image-20220422202553681"></p>
<p><img src="/2022/04/22/hua-tu/image-20220422204459795.png" alt="image-20220422204459795"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/16/er-cha-shu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/16/er-cha-shu/" class="post-title-link" itemprop="url">äºŒå‰æ ‘</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-16 16:33:41 / ä¿®æ”¹æ—¶é—´ï¼š20:13:06" itemprop="dateCreated datePublished" datetime="2022-04-16T16:33:41+08:00">2022-04-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®ç»“æ„</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#%E4%B8%80-%E6%8B%93%E5%B1%95%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9E%84%E5%BB%BA%E4%B8%8E%E9%81%8D%E5%8E%86">ä¸€ã€æ‹“å±•äºŒå‰æ ‘çš„æ„å»ºä¸éå†</a></li>
<li><a href="#%E4%BA%8C-%E7%BA%BF%E7%B4%A2%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9E%84%E5%BB%BA%E4%B8%8E%E9%81%8D%E5%8E%86">äºŒã€çº¿ç´¢äºŒå‰æ ‘çš„æ„å»ºä¸éå†</a></li>
</ul>
<!-- tocstop -->

<h1><span id="ä¸€-æ‹“å±•äºŒå‰æ ‘çš„æ„å»ºä¸éå†">ä¸€ã€æ‹“å±•äºŒå‰æ ‘çš„æ„å»ºä¸éå†</span></h1><p>ä¸­åºéå†å’ŒååºåŒç†</p>
<p><img src="/2022/04/16/er-cha-shu/D8B2D690E6F80BC6F5BE899D69C39C18.jpg" alt="img"></p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;

using namespace std;
template&lt;typename DataType&gt;
struct Binode
{
    DataType data;
    Binode&lt;DataType&gt; *lchild ,* rchild;
};

template&lt;typename DataType&gt;
class Bitree
{
public:
    Bitree(){root = Creat();} //å»ºç«‹ä¸€æ£µäºŒå‰æ ‘
    void Preorder(){Preorder(root);}
private:
    Binode&lt;DataType&gt;* Creat();
    void Preorder(Binode&lt;DataType&gt;*bt);  //å‰åºéå†å‡½æ•°è°ƒç”¨
    Binode&lt;DataType&gt;* root; //æŒ‡å‘æ ¹èŠ‚ç‚¹çš„å¤´æŒ‡é’ˆ
};

//æ„é€ å‡½æ•°å»ºç«‹äºŒå‰æ ‘
template&lt;typename DataType&gt;
Binode&lt;DataType&gt; * Bitree&lt;DataType&gt;::Creat()
{
    Binode&lt;DataType&gt; * bt;
    char ch;
    cout&lt;&lt;"è¯·è¾“å…¥ä¸€ä¸ªå…ƒç´ ï¼š"&lt;&lt;endl;
    cin&gt;&gt;ch;
    if(ch=='#') bt=nullptr; //ç©º
    else{
        bt = new Binode&lt;DataType&gt;;
        bt-&gt;data=ch;
        bt-&gt;lchild = Creat();
        bt-&gt;rchild = Creat();
    }
    return bt;
}

//å‰åºéå†
template&lt;typename DataType&gt;
void Bitree&lt;DataType&gt;::Preorder(Binode&lt;DataType&gt;*bt)
{
    if(bt==nullptr) return;
    else{
        cout&lt;&lt;bt-&gt;data&lt;&lt;"\t";
        Preorder(bt-&gt;lchild);
        Preorder(bt-&gt;rchild);
    }
}

int main()
{
    Bitree&lt;char&gt;T{};
    T.Preorder();
    return 0;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1><span id="äºŒ-çº¿ç´¢äºŒå‰æ ‘çš„æ„å»ºä¸éå†">äºŒã€çº¿ç´¢äºŒå‰æ ‘çš„æ„å»ºä¸éå†</span></h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/06/xian-xing-pan-bie-fen-xi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/06/xian-xing-pan-bie-fen-xi/" class="post-title-link" itemprop="url">çº¿æ€§åˆ¤åˆ«åˆ†æ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-06 19:52:29 / ä¿®æ”¹æ—¶é—´ï¼š19:54:18" itemprop="dateCreated datePublished" datetime="2022-04-06T19:52:29+08:00">2022-04-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">æœºå™¨å­¦ä¹ </span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1><span id="åŸºäºçº¿æ€§åˆ¤åˆ«æ¨¡å‹çš„åˆ†ç±»">åŸºäºçº¿æ€§åˆ¤åˆ«æ¨¡å‹çš„åˆ†ç±»</span></h1><p>PCAï¼ˆä¸»æˆåˆ†åˆ†æï¼‰æ˜¯ä¸è€ƒè™‘æ ·æœ¬ç±»åˆ«è¾“å‡ºçš„æ— ç›‘ç£é™ç»´æŠ€æœ¯ã€‚</p>
<p>LDAï¼ˆçº¿æ€§åˆ¤åˆ«åˆ†æï¼‰æ˜¯ä¸€ç§ç›‘ç£å­¦ä¹ çš„é™ç»´æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„æ•°æ®é›†çš„æ¯ä¸ªæ ·æœ¬æ˜¯æœ‰ç±»åˆ«è¾“å‡ºçš„ã€‚</p>
<p>LDAçš„æ€æƒ³å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼Œå°±æ˜¯â€œæŠ•å½±åç±»å†…æ–¹å·®æœ€å°ï¼Œç±»é—´æ–¹å·®æœ€å¤§â€ã€‚æˆ‘ä»¬è¦å°†æ•°æ®åœ¨ä½ç»´åº¦ä¸Šè¿›è¡ŒæŠ•å½±ï¼ŒæŠ•å½±åå¸Œæœ›æ¯ä¸€ç§ç±»åˆ«æ•°æ®çš„æŠ•å½±ç‚¹å°½å¯èƒ½çš„æ¥è¿‘ï¼Œè€Œä¸åŒç±»åˆ«çš„æ•°æ®çš„ç±»åˆ«ä¸­å¿ƒä¹‹é—´çš„è·ç¦»å°½å¯èƒ½çš„å¤§ã€‚</p>
<p><img src="/2022/04/06/xian-xing-pan-bie-fen-xi/image-20220406195125943.png" alt="image-20220406195125943"></p>
<p>åˆ†å­ä¸ºæŠ•å½±æ•°æ®åçš„å‡å€¼åªå·®ï¼Œåˆ†æ¯ä¸ºæ–¹å·®ä¹‹åï¼ŒLDA çš„ç›®çš„å°±æ˜¯ä½¿å¾— J å€¼æœ€å¤§åŒ–ï¼Œé‚£ä¹ˆå¯ä»¥ç†è§£ä¸º<strong>æœ€å¤§åŒ–åˆ†å­ï¼Œå³ä½¿å¾—ç±»åˆ«ä¹‹é—´çš„è·ç¦»è¶Šè¿œ</strong>ï¼ŒåŒæ—¶<strong>æœ€å°åŒ–åˆ†æ¯ï¼Œä½¿å¾—æ¯ä¸ªç±»åˆ«å†…éƒ¨çš„æ–¹å·®è¶Šå°</strong>ï¼Œè¿™æ ·å°±èƒ½ä½¿å¾—æ¯ä¸ªç±»ç±»åˆ«çš„æ•°æ®å¯ä»¥åœ¨æŠ•å½±çŸ©é˜µ w çš„æ˜ å°„ä¸‹ï¼Œåˆ†çš„è¶Šå¼€ã€‚</p>
<blockquote>
<p>lda = LinearDiscriminantAnalysis()<br>{â€˜n_componentsâ€™: None,<br>, â€˜priorsâ€™: None,<br>, â€˜shrinkageâ€™: None,<br>, â€˜solverâ€™: â€˜svdâ€™,<br>, â€˜store_covarianceâ€™: False,<br>, â€˜tolâ€™: 0.0001}</p>
</blockquote>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>discriminant_analysis <span class="token keyword">import</span> LinearDiscriminantAnalysis   <span class="token comment"># LDA</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_iris
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split
<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> metrics
<span class="token keyword">from</span> mpl_toolkits<span class="token punctuation">.</span>mplot3d <span class="token keyword">import</span> Axes3D  <span class="token comment"># å¯¼å…¥ä¸‰ç»´æ˜¾ç¤ºå·¥å…·</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_digits <span class="token comment"># å¯¼å…¥demoæ•°æ®åˆ¶ä½œæ–¹æ³•</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> classification_report<span class="token punctuation">,</span> confusion_matrix

mnist <span class="token operator">=</span> load_digits<span class="token punctuation">(</span><span class="token punctuation">)</span>
x<span class="token punctuation">,</span> test_x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> test_y <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>mnist<span class="token punctuation">.</span>data<span class="token punctuation">,</span> mnist<span class="token punctuation">.</span>target<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># å»ºç«‹ LDA æ¨¡å‹</span>
m_lda <span class="token operator">=</span> LinearDiscriminantAnalysis<span class="token punctuation">(</span><span class="token punctuation">)</span>
m_lda<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
x_new <span class="token operator">=</span> m_lda<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>x<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>x_new<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x_new<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">,</span> c<span class="token operator">=</span>y<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'MNIST with LDA Model'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

y_test_pred <span class="token operator">=</span> m_lda<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_x<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•é›†çš„çœŸå®æ ‡ç­¾:"</span><span class="token punctuation">,</span> test_y<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•é›†çš„é¢„æµ‹æ ‡ç­¾:"</span><span class="token punctuation">,</span> y_test_pred<span class="token punctuation">)</span>
<span class="token comment"># ç»Ÿè®¡æ¯ä¸€ç±»åˆ«çš„é¢„æµ‹å‡†ç¡®ç‡ã€å¬å›ç‡ã€F1åˆ†æ•°</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>classification_report<span class="token punctuation">(</span>test_y<span class="token punctuation">,</span> y_test_pred<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/06/luo-ji-hui-gui/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/06/luo-ji-hui-gui/" class="post-title-link" itemprop="url">é€»è¾‘å›å½’</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-06 18:36:49 / ä¿®æ”¹æ—¶é—´ï¼š18:37:23" itemprop="dateCreated datePublished" datetime="2022-04-06T18:36:49+08:00">2022-04-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">æœºå™¨å­¦ä¹ </span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1><span id="åŸºäºé€»è¾‘å›å½’çš„åˆ†ç±»é¢„æµ‹">åŸºäºé€»è¾‘å›å½’çš„åˆ†ç±»é¢„æµ‹</span></h1><p>Logistic regressionï¼Œç®€ç§°LRï¼Œæ˜¯ä¸€ä¸ªåˆ†ç±»æ¨¡å‹</p>
<p>é€»è¾‘å›å½’æ¨¡å‹å¯ä»¥ç”¨äºé¢„æµ‹åœ¨ç»™å®šçš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿæˆ–äº§å“çš„æ•…éšœçš„å¯èƒ½æ€§ï¼Œæˆ–è€…åŸºäºè§‚å¯Ÿåˆ°çš„æ‚£è€…ç‰¹å¾ï¼ˆå¹´é¾„ï¼Œæ€§åˆ«ï¼Œä½“é‡æŒ‡æ•°,å„ç§è¡€æ¶²æ£€æŸ¥çš„ç»“æœç­‰ï¼‰åˆ†æé¢„æµ‹å‘ç”Ÿç³–å°¿ç—…çš„é£é™©ã€‚</p>
<p><strong>æ‹Ÿåˆå‡ºæ¥çš„å‚æ•°å°±ä»£è¡¨äº†æ¯ä¸€ä¸ªç‰¹å¾(feature)å¯¹ç»“æœçš„å½±å“</strong>ã€‚ä½†å…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçº¿æ€§çš„åˆ†ç±»å™¨ï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿä¼šæ‹¿é€»è¾‘å›å½’æ¨¡å‹å»åšä¸€äº›ä»»åŠ¡å°è¯•çš„åŸºçº¿ï¼ˆåŸºç¡€æ°´å¹³ï¼‰ã€‚</p>
<h3><span id="åŸç†">åŸç†ï¼š</span></h3><p><img src="/2022/04/06/luo-ji-hui-gui/image-20220406183225218.png" alt="image-20220406183225218"></p>
<blockquote>
<p>å½“ z=&gt;0æ—¶,y=&gt;0.5,åˆ†ç±»ä¸º1</p>
<p>å½“ z&lt;0æ—¶,y&lt;0.5,åˆ†ç±»ä¸º0</p>
</blockquote>
<p>å…¶å¯¹åº”çš„yå€¼æˆ‘ä»¬å¯ä»¥è§†ä¸ºç±»åˆ«1çš„æ¦‚ç‡é¢„æµ‹å€¼.</p>
<h3><span id="å®éªŒåŸºäºé¸¢å°¾èŠ±irisæ•°æ®é›†çš„é€»è¾‘å›å½’åˆ†ç±»å®è·µ">å®éªŒï¼šåŸºäºé¸¢å°¾èŠ±ï¼ˆirisï¼‰æ•°æ®é›†çš„é€»è¾‘å›å½’åˆ†ç±»å®è·µ</span></h3><p>æ•°æ®é›†ä»‹ç»ï¼šè¯¥æ•°æ®é›†ä¸€å…±åŒ…å«5ä¸ªå˜é‡ï¼Œå…¶ä¸­4ä¸ªç‰¹å¾å˜é‡ï¼Œ1ä¸ªç›®æ ‡åˆ†ç±»å˜é‡ã€‚å…±æœ‰150ä¸ªæ ·æœ¬ï¼Œç›®æ ‡å˜é‡ä¸º èŠ±çš„ç±»åˆ« å…¶éƒ½å±äºé¸¢å°¾å±ä¸‹çš„ä¸‰ä¸ªäºšå±ï¼Œåˆ†åˆ«æ˜¯å±±é¸¢å°¾ (Iris-setosa)ï¼Œå˜è‰²é¸¢å°¾(Iris-versicolor)å’Œç»´å‰å°¼äºšé¸¢å°¾(Iris-virginica)ã€‚åŒ…å«çš„ä¸‰ç§é¸¢å°¾èŠ±çš„å››ä¸ªç‰¹å¾ï¼Œåˆ†åˆ«æ˜¯èŠ±è¼é•¿åº¦(cm)ã€èŠ±è¼å®½åº¦(cm)ã€èŠ±ç“£é•¿åº¦(cm)ã€èŠ±ç“£å®½åº¦(cm)ï¼Œè¿™äº›å½¢æ€ç‰¹å¾åœ¨è¿‡å»è¢«ç”¨æ¥è¯†åˆ«ç‰©ç§ã€‚</p>
<h4><span id="æ•°æ®å¯è§†åŒ–">æ•°æ®å¯è§†åŒ–</span></h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> LogisticRegression   <span class="token comment"># é€»è¾‘å›å½’å‡½æ•°</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_iris


data <span class="token operator">=</span> load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#å¾—åˆ°æ•°æ®ç‰¹å¾</span>
iris_target <span class="token operator">=</span> data<span class="token punctuation">.</span>target <span class="token comment">#å¾—åˆ°æ•°æ®å¯¹åº”çš„æ ‡ç­¾</span>
iris_features <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">.</span>data<span class="token punctuation">,</span> columns<span class="token operator">=</span>data<span class="token punctuation">.</span>feature_names<span class="token punctuation">)</span> <span class="token comment">#åˆ©ç”¨Pandasè½¬åŒ–ä¸ºDataFrameæ ¼å¼</span>

<span class="token comment"># print(iris_features.head())</span>

<span class="token comment">## åˆå¹¶æ ‡ç­¾å’Œç‰¹å¾ä¿¡æ¯</span>
iris_all <span class="token operator">=</span> iris_features<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">##è¿›è¡Œæµ…æ‹·è´ï¼Œé˜²æ­¢å¯¹äºåŸå§‹æ•°æ®çš„ä¿®æ”¹</span>
iris_all<span class="token punctuation">[</span><span class="token string">'target'</span><span class="token punctuation">]</span> <span class="token operator">=</span> iris_target
<span class="token comment">## ç‰¹å¾ä¸æ ‡ç­¾ç»„åˆçš„æ•£ç‚¹å¯è§†åŒ–</span>
sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span>data<span class="token operator">=</span>iris_all<span class="token punctuation">,</span>diag_kind<span class="token operator">=</span><span class="token string">'hist'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span> <span class="token string">'target'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4><span id="äºŒåˆ†ç±»">äºŒåˆ†ç±»</span></h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> LogisticRegression   <span class="token comment"># é€»è¾‘å›å½’å‡½æ•°</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_iris
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split
<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> metrics


data <span class="token operator">=</span> load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#å¾—åˆ°æ•°æ®ç‰¹å¾</span>
iris_target <span class="token operator">=</span> data<span class="token punctuation">.</span>target <span class="token comment">#å¾—åˆ°æ•°æ®å¯¹åº”çš„æ ‡ç­¾</span>
iris_features <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">.</span>data<span class="token punctuation">,</span> columns<span class="token operator">=</span>data<span class="token punctuation">.</span>feature_names<span class="token punctuation">)</span> <span class="token comment">#åˆ©ç”¨Pandasè½¬åŒ–ä¸ºDataFrameæ ¼å¼</span>

iris_features_part <span class="token operator">=</span> iris_features<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">]</span>
iris_target_part <span class="token operator">=</span> iris_target<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">100</span><span class="token punctuation">]</span>

x_train<span class="token punctuation">,</span> x_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>
    iris_features_part<span class="token punctuation">,</span> iris_target_part<span class="token punctuation">,</span> test_size <span class="token operator">=</span> <span class="token number">0.2</span><span class="token punctuation">,</span> random_state <span class="token operator">=</span> <span class="token number">2020</span><span class="token punctuation">)</span>

clf <span class="token operator">=</span> LogisticRegression<span class="token punctuation">(</span>random_state<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> solver<span class="token operator">=</span><span class="token string">'lbfgs'</span><span class="token punctuation">)</span>  <span class="token comment">#  é€»è¾‘å›å½’æ¨¡å‹</span>
clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>  <span class="token comment"># è®­ç»ƒæ¨¡å‹</span>
train_predict <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>x_train<span class="token punctuation">)</span>
test_predict <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>x_test<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'w'</span><span class="token punctuation">,</span>clf<span class="token punctuation">.</span>coef_<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'w0'</span><span class="token punctuation">,</span>clf<span class="token punctuation">.</span>intercept_<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'è®­ç»ƒé›†å‡†ç¡®ç‡ï¼š'</span><span class="token punctuation">,</span>metrics<span class="token punctuation">.</span>accuracy_score<span class="token punctuation">(</span>y_train<span class="token punctuation">,</span>train_predict<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æµ‹è¯•é›†å‡†ç¡®ç‡ï¼š'</span><span class="token punctuation">,</span>metrics<span class="token punctuation">.</span>accuracy_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span>test_predict<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>w [[ 0.45181973 -0.81743611  2.14470304  0.89838607]]<br>w0 [-6.53367714]<br>è®­ç»ƒé›†å‡†ç¡®ç‡ï¼š 1.0<br>æµ‹è¯•é›†ï¼š 1.0</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/02/ba-huang-hou-wen-ti/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/02/ba-huang-hou-wen-ti/" class="post-title-link" itemprop="url">å…«çš‡åé—®é¢˜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-02 16:24:41" itemprop="dateCreated datePublished" datetime="2022-04-02T16:24:41+08:00">2022-04-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-04-04 22:10:36" itemprop="dateModified" datetime="2022-04-04T22:10:36+08:00">2022-04-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95-%E9%80%92%E5%BD%92/" itemprop="url" rel="index"><span itemprop="name">ç®—æ³•-é€’å½’</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>é€šè¿‡å¯¹å®ƒæ”»å‡»ä½ç½®çš„ç ”ç©¶ï¼Œå¯ä»¥å‘ç°ï¼Œå®ƒæ”»å‡»äº†ä¸Šã€ä¸‹ã€å·¦ã€å³ã€å·¦ä¸Šã€å·¦ä¸‹ã€å³ä¸Šã€å³ä¸‹å…«ä¸ªæ–¹å‘ï¼›<br>int x[8]={0,0,-1,1,-1,-1,1,1};<br>int y[8]={1,-1,0,0,1,-1,1,-1};</p>
<p>æˆ‘ä»¬è¦è€ƒè™‘å‡ ä¸ªé—®é¢˜ï¼š<br>ç¬¬ä¸€ã€çš‡åæ”¾ç½®åï¼Œå¯ä»¥æ”»å‡»åˆ°é‚£äº›åœ°æ–¹ï¼ˆæ•°ç»„æ ‡è®°æ˜¯å¦è¢«æ”»å‡»ï¼‰<br>ç¬¬äºŒã€é™¤å»æ”»å‡»çš„åœ°æ–¹å’Œå·²ç»æ”¾ç½®çš„åœ°æ–¹ï¼Œè¿˜å‰©ä¸‹å“ªäº›åœ°æ–¹å¯ä»¥æ”¾ç½®ï¼ˆæ•°ç»„å­˜å‚¨æ”¾ç½®ä½ç½®ï¼Œå³ç­”æ¡ˆï¼‰<br>ç¬¬ä¸‰ã€æ€æ ·å›æº¯ï¼Œå› ä¸ºä¸€å®šæ˜¯ä¸€è¡Œä¸€è¡Œçš„æ”¾ç½®ï¼Œå½“é‡åˆ°æŸä¸€è¡Œæ²¡æœ‰åœ°æ–¹çš„æ—¶å€™ï¼Œå°±ä¸€å®šæ˜¯ä¹‹å‰çš„æŸä¸€ä¸ªæ£‹å­æ”¾é”™äº†ä½ç½®ï¼Œå°±è¿”å›åˆ°ä¹‹å‰ï¼Œéœ€è¦ç”¨ä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜ï¼Œä¸Šä¸€æ­¥éª¤äº§ç”Ÿçš„ç­”æ¡ˆ</p>
<h4><span id="ä¸€-vector">ä¸€ã€vector</span></h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
#include &lt;vector&gt;
using namespace std;

// æ›´æ–°æ•°ç»„
void put_queen(int x,int y,vector&lt;vector&lt;int&gt;&gt;&amp;attack){
    static const int dx[] = {-1,1,0,0,-1,-1,1,1};
    static const int dy[] = {0,0,-1,1,-1,1,-1,1};
    attack[x][y] = 1;

    //æ•°ç»„æ ‡è®°
    for(int i=1;i&lt;attack.size();i++){
        for(int j=0;j&lt;8;j++){
            int nx = x + i*dx[j];
            int ny = y + i*dy[j];

            if(nx&gt;=0&amp;&amp;nx&lt;attack.size()&amp;&amp;ny&gt;=0&amp;&amp;ny&lt;attack.size()){
                attack[nx][ny]=1;
            }
        }
    }
}

// å›æº¯å‡½æ•°
void backtrack(int k,int n,   //kè¡¨ç¤ºå¤„ç†çš„è¡Œ
               vector&lt;string&gt;&amp;queen,   //å­˜æ”¾çš‡åä½ç½®
               vector&lt;vector&lt;int&gt;&gt;&amp;attack,    //æ”»å‡»æ•°ç»„
               vector&lt;vector&lt;string&gt;&gt;&amp;solve){      //å­˜å‚¨å…¨éƒ¨è§£æ³•

    if(k==n){
        solve.push_back(queen);
        return ;
    }

    for(int i=0;i&lt;n;i++){
        if(attack[k][i]==0){
            vector&lt;vector&lt;int&gt;&gt;tmp = attack;  //å¤‡ä»½æ”»å‡»æ•°ç»„
            queen[k][i] = 'q';
            put_queen(k,i,attack);
            backtrack(k+1,n,queen,attack,solve);
            attack = tmp;   //æ¢å¤æ”»å‡»æ•°ç»„
            queen[k][i] = '.';  //æ¢å¤çš‡åæ•°ç»„
        }
    }
}
// ç­”æ¡ˆ
vector&lt;vector&lt;string&gt;&gt;solveNQueens(int n){
    vector&lt;vector&lt;string&gt;&gt;solve;
    vector&lt;vector&lt;int&gt;&gt;attack;
    vector&lt;string&gt;queen;

    //åˆå§‹åŒ–
    for(int i=0;i&lt;n;i++){
        attack.push_back((std::vector&lt;int&gt;()));
        for(int j=0;j&lt;n;j++){
            attack[i].push_back(0);
        }
        queen.push_back("");
        queen[i].append(n,'.');
    }
    backtrack(0,n,queen,attack,solve);
    return solve;
}

int main()
{
    vector&lt;vector&lt;string&gt;&gt;result;
    result = solveNQueens(8);
    for(int i=0;i&lt;result.size();i++){
        cout&lt;&lt;"è§£æ³•"&lt;&lt;i&lt;&lt;endl;
        for(int j=0;j&lt;result[i].size();j++){
            cout&lt;&lt;result[i][j].c_str()&lt;&lt;endl;
        }
        cout&lt;&lt;endl;
    }
    return 0;
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4><span id="äºŒ-ä¸€ç»´æ•°ç»„">äºŒã€ä¸€ç»´æ•°ç»„</span></h4><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#include &lt;cstring&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;

using namespace std;

//å·¦ä¸Šè§’ä¸ºï¼ˆ0ï¼Œ0ï¼‰
int xx[8]={0,0,-1,1,-1,-1,1,1};
int yy[8]={1,-1,0,0,1,-1,1,-1};
int a=0,n=8;
int attack[20][20];//æ ‡è®°çš‡åçš„æ”»å‡»ä½ç½®
char queen[20][20];//å‚¨å­˜çš‡åçš„æ”¾ç½®çš„ä½ç½®
int solve[99];

void copy(int a[20][20],int b[20][20],int n)
{
    for(int i=0;i&lt;n;i++)
    {
        for(int j=0;j&lt;n;j++)
        {
            b[i][j]=a[i][j];
        }
    }
}
void put(int x,int y,int n)
{
    attack[x][y]=1;
    for(int i=1;i&lt;n;i++)//ä»çš‡åä½ç½®å‘1â€”â€”n-1ä¸ªè·ç¦»
    {
         for(int j=0;j&lt;8;j++)//å…«ä¸ªæ–¹å‘
         {
             int r=x+i*xx[j];
             int l=y+i*yy[j];
             if(r&gt;=0&amp;&amp;r&lt;n&amp;&amp;l&gt;=0&amp;&amp;l&lt;n) attack[r][l]=1;
         }
    }
}
void backtracking(int n,int k)
{
     if(k==n)//ç»ˆæ­¢æ¡ä»¶
     {
         a++;
         for(int i=0;i&lt;n;i++)
         {
             for(int j=0;j&lt;n;j++)
             {
                 if(queen[i][j]=='Q') solve[a]=solve[a]*10+j+1;
             }
         }
         return ;
     }
     for(int i=0;i&lt;n;i++)//å¾ªç¯åˆ—
     {
         if(attack[k][i]==0)
         {
             int temp[20][20];
             copy(attack,temp,n);
             put(k,i,n);//æ›´æ–°æ”»å‡»ä½ç½®
             queen[k][i]='Q';
             backtracking(n,k+1);
             copy(temp,attack,n);//æ¢å¤
             queen[k][i]='.';//æ¢å¤
         }
     }
}

int main()
{
    for(int i=0;i&lt;n;i++)
    {
        for(int j=0;j&lt;n;j++)
        {
            attack[i][j]=0;
            queen[i][j]='.';
        }
    }
    backtracking(n,0);
    for(int i=0;i&lt;91;i++)
    {
        cout&lt;&lt;solve[i]&lt;&lt;endl;
    }
	return 0;
}
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/02/kmp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/02/kmp/" class="post-title-link" itemprop="url">KMP</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-02 16:24:24 / ä¿®æ”¹æ—¶é—´ï¼š23:40:50" itemprop="dateCreated datePublished" datetime="2022-04-02T16:24:24+08:00">2022-04-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®ç»“æ„</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>è¿™æ®µä»£ç ï¼Œæ˜¯ç”¨stringç±»å‹æ¥å®ç°çš„ä»0å¼€å§‹çš„å­—ç¬¦ä¸²ï¼Œå³nextæ•°ç»„æ˜¯ä»-1å¼€å§‹</p>
<pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;cstring&gt;
using namespace std;

int MaxSize = 300;
int getnext(string c,int next[])
{
    next[0] = -1;
    int i=0,j=-1;
    while(i &lt; c.length()-1)
    {
        if(j==-1||c[i]==c[j]) next[++i] = ++j;
        else j = next[j];
    }
}

int kmp(string a,string b)
{
    int next[MaxSize];

    getnext(b,next);

    int i=0,j=0;
    while(i!=a.length() &amp;&amp; j!=b.length()){
        if(j==-1||a[i]==b[j])
        {
            i++;
            j++;
        }
        else j = next[j];
    }
    return i - b.length();
}

int main()
{
    string a,b;
    cin&gt;&gt;a;
    cin&gt;&gt;b;
    cout&lt;&lt;kmp(a,b)&lt;&lt;endl;
    return 0;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><strong>æ³¨æ„ï¼šè¦å…ˆæŠŠæœ‰ç¬¦å·æ•°å¼ºåˆ¶è½¬æ¢æˆæ— ç¬¦å·æ•°ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒ</strong></p>
<p>å¦‚æœå®ƒçš„ä¸€ä¸ªè¿ç®—æ•°æ˜¯æœ‰ç¬¦å·çš„è€Œå¦ä¸€ä¸ªæ˜¯æ— ç¬¦å·çš„ï¼Œé‚£ä¹ˆå°±ä¼šéšå¼åœ°å°†æœ‰ç¬¦å·å‚æ•°å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºæ— ç¬¦å·æ•°ã€‚</p>
<p><img src="/2022/04/02/kmp/image-20220402224806741.png" alt="image-20220402224806741"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/02/fa-zhi-pai/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/02/fa-zhi-pai/" class="post-title-link" itemprop="url">å‘çº¸ç‰Œ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-02 16:24:24 / ä¿®æ”¹æ—¶é—´ï¼š23:41:33" itemprop="dateCreated datePublished" datetime="2022-04-02T16:24:24+08:00">2022-04-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®ç»“æ„</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/01/pi-liang-chong-ming-ming/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/01/pi-liang-chong-ming-ming/" class="post-title-link" itemprop="url">æ‰¹é‡é‡å‘½å</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-01 19:46:22 / ä¿®æ”¹æ—¶é—´ï¼š19:46:52" itemprop="dateCreated datePublished" datetime="2022-04-01T19:46:22+08:00">2022-04-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®å¤„ç†</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os

<span class="token keyword">def</span> <span class="token function">rename</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>
    path <span class="token operator">=</span> s
    filelist <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    a <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> files <span class="token keyword">in</span> filelist<span class="token punctuation">:</span>
        Olddir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path<span class="token punctuation">,</span>files<span class="token punctuation">)</span>
        filename <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        filetype <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        Newdir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">".jpg"</span><span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>Olddir<span class="token punctuation">,</span>Newdir<span class="token punctuation">)</span>
        a <span class="token operator">+=</span> <span class="token number">1</span>

s <span class="token operator">=</span> <span class="token string">"./æµ·è´¼å›¾ç‰‡"</span>
rename<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/01/zi-zhi-shu-ju-ji/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/01/zi-zhi-shu-ju-ji/" class="post-title-link" itemprop="url">è‡ªåˆ¶æ•°æ®é›†</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-01 19:42:42 / ä¿®æ”¹æ—¶é—´ï¼š19:44:34" itemprop="dateCreated datePublished" datetime="2022-04-01T19:42:42+08:00">2022-04-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®å¤„ç†</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#%E4%B8%80-%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86resize">ä¸€ã€æ•°æ®é¢„å¤„ç†ï¼ˆresizeï¼‰</a></li>
<li><a href="#%E4%BA%8C-dataset%E7%B1%BB">äºŒã€Datasetç±»</a><ul>
<li><a href="#1-%E5%88%B6%E4%BD%9C%E5%9B%BE%E7%89%87%E6%95%B0%E6%8D%AE%E7%9A%84%E7%B4%A2%E5%BC%95">1ã€åˆ¶ä½œå›¾ç‰‡æ•°æ®çš„ç´¢å¼•</a></li>
<li><a href="#2-%E6%9E%84%E5%BB%BAdataset%E5%AD%90%E7%B1%BB">2ã€æ„å»ºDatasetå­ç±»</a></li>
<li><a href="#3-%E5%88%B6%E4%BD%9C%E5%8C%85%E5%90%AB%E8%B7%AF%E5%BE%84%E5%92%8C%E6%A0%87%E7%AD%BE%E7%9A%84txt%E6%96%87%E4%BB%B6">3ã€åˆ¶ä½œåŒ…å«è·¯å¾„å’Œæ ‡ç­¾çš„txtæ–‡ä»¶</a></li>
<li><a href="#3-%E8%AF%BB%E5%8F%96txt%E6%96%87%E4%BB%B6%E7%BB%A7%E6%89%BFdataset">3ã€è¯»å–txtæ–‡ä»¶ï¼Œç»§æ‰¿Dataset</a></li>
</ul>
</li>
<li><a href="#ps%E5%A4%84%E7%90%86%E7%BC%BA%E5%A4%B1%E6%95%B0%E6%8D%AE">ps:å¤„ç†ç¼ºå¤±æ•°æ®</a></li>
</ul>
<!-- tocstop -->

<p><img src="/2022/04/01/zi-zhi-shu-ju-ji/202008261737219-16442337220204.png" alt="img"></p>
<h1><span id="ä¸€-æ•°æ®é¢„å¤„ç†resize">ä¸€ã€æ•°æ®é¢„å¤„ç†ï¼ˆresizeï¼‰</span></h1><p>æ•°æ®åœ¨ç¥ç»ç½‘ç»œçš„æ¨¡å‹ä¸­è¿›è¡Œä¼ æ’­å‰é¦–å…ˆéœ€è¦ä¿è¯å°ºå¯¸ç›¸åŒ(å¯¹äºæ‰€æœ‰å›¾åƒï¼Œæˆ‘ä»¬å°†å…¶Resizeåˆ°100x100çš„å°ºå¯¸)</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> cv2
<span class="token keyword">import</span> os
<span class="token keyword">from</span> tqdm <span class="token keyword">import</span> tqdm

DataPath<span class="token operator">=</span><span class="token string">r'TrainingData'</span><span class="token comment"># è®­ç»ƒæ•°æ®</span>
SavePath<span class="token operator">=</span><span class="token string">r'ResizedData'</span>

<span class="token keyword">for</span> img_dir <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>DataPath<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># åŒ…å«ç±»åˆ«ä¿¡æ¯çš„æ–‡ä»¶å¤¹</span>
    img_label_path<span class="token operator">=</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>DataPath<span class="token punctuation">,</span>img_dir<span class="token punctuation">)</span>
    <span class="token comment"># å­˜å‚¨å¤„ç†åçš„å›¾ç‰‡çš„æ–‡ä»¶å¤¹</span>
    save_label_path<span class="token operator">=</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>SavePath<span class="token punctuation">,</span>img_dir<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>save_label_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>save_label_path<span class="token punctuation">)</span>
    <span class="token keyword">for</span> image <span class="token keyword">in</span> tbar<span class="token punctuation">:</span>
        <span class="token comment"># è¿›å…¥åˆ°æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œå›¾ç‰‡éå†</span>
        image_path<span class="token operator">=</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>img_label_path<span class="token punctuation">,</span>image<span class="token punctuation">)</span>
        <span class="token comment"># ä½¿ç”¨cv2è¯»å–å›¾ç‰‡</span>
        image_old<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>image_path<span class="token punctuation">)</span>
        image_new<span class="token operator">=</span>cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>image_old<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># ä¿å­˜å›¾åƒ</span>
        save_path<span class="token operator">=</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>save_label_path<span class="token punctuation">,</span>image<span class="token punctuation">)</span>
        cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span>save_path<span class="token punctuation">,</span>image_new<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1><span id="äºŒ-datasetç±»">äºŒã€Datasetç±»</span></h1><p>â€‹        Datasetç±»ä½œä¸ºæ‰€æœ‰çš„datasetsçš„åŸºç±»å­˜åœ¨ï¼Œæ‰€æœ‰çš„datasetséƒ½éœ€è¦ç»§æ‰¿å®ƒï¼Œå…¶ä¸­çˆ¶ç±»ä¸­çš„ä¸¤ä¸ªç§æœ‰æˆå‘˜å‡½æ•°å¿…é¡»è¢«é‡è½½ï¼Œå¦åˆ™å°†ä¼šè§¦å‘é”™è¯¯æç¤ºã€‚</p>
<p>â€‹        é‡ç‚¹çœ‹ getitemå‡½æ•°ï¼Œgetitemæ¥æ”¶ä¸€ä¸ªindexï¼Œç„¶åè¿”å›å›¾ç‰‡æ•°æ®å’Œæ ‡ç­¾ï¼Œè¿™ä¸ªindexé€šå¸¸æŒ‡çš„æ˜¯ä¸€ä¸ªlistçš„indexï¼Œè¿™ä¸ªlistçš„æ¯ä¸ªå…ƒç´ å°±åŒ…å«äº†å›¾ç‰‡æ•°æ®çš„è·¯å¾„å’Œæ ‡ç­¾ä¿¡æ¯ã€‚</p>
<p>â€‹        ç„¶è€Œï¼Œå¦‚ä½•åˆ¶ä½œè¿™ä¸ªlistå‘¢ï¼Œé€šå¸¸çš„æ–¹æ³•æ˜¯å°†å›¾ç‰‡çš„è·¯å¾„å’Œæ ‡ç­¾ä¿¡æ¯å­˜å‚¨åœ¨ä¸€ä¸ªtxtä¸­ï¼Œç„¶åä»è¯¥txtä¸­è¯»å–ã€‚é‚£ä¹ˆè¯»å–è‡ªå·±æ•°æ®çš„åŸºæœ¬æµç¨‹å°±æ˜¯ï¼š</p>
<p>1.åˆ¶ä½œå­˜å‚¨äº†å›¾ç‰‡çš„è·¯å¾„å’Œæ ‡ç­¾ä¿¡æ¯çš„txt<br>2.å°†è¿™äº›ä¿¡æ¯è½¬åŒ–ä¸ºlistï¼Œè¯¥listæ¯ä¸€ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªæ ·æœ¬<br>3.é€šè¿‡getitemå‡½æ•°ï¼Œè¯»å–æ•°æ®å’Œæ ‡ç­¾ï¼Œå¹¶è¿”å›æ•°æ®å’Œæ ‡ç­¾</p>
<h3><span id="1-åˆ¶ä½œå›¾ç‰‡æ•°æ®çš„ç´¢å¼•">1ã€åˆ¶ä½œå›¾ç‰‡æ•°æ®çš„ç´¢å¼•</span></h3><h3><span id="2-æ„å»ºdatasetå­ç±»">2ã€æ„å»ºDatasetå­ç±»</span></h3><p>å›¾åƒå­˜å‚¨åœ¨ä¸€ä¸ªç›®å½•<code>img_dir</code>ä¸­ï¼Œå®ƒä»¬çš„æ ‡ç­¾åˆ†åˆ«å­˜å‚¨åœ¨ä¸€ä¸ª CSV æ–‡ä»¶<code>annotations_file</code>ä¸­</p>
<p>â€‹        __init__å‡½æ•°åœ¨å®ä¾‹åŒ– Dataset å¯¹è±¡æ—¶è¿è¡Œä¸€æ¬¡,åˆå§‹åŒ–åŒ…å«å›¾åƒã€æ³¨é‡Šæ–‡ä»¶å’Œä¸¤ç§è½¬æ¢çš„ç›®å½•</p>
<p>â€‹        1ã€åˆå§‹åŒ–ä¸­ä»æˆ‘ä»¬å‡†å¤‡å¥½çš„txté‡Œè·å–å›¾ç‰‡çš„è·¯å¾„å’Œæ ‡ç­¾, 2ã€transformæ˜¯ä¸€ä¸ªComposeç±»å‹ï¼Œé‡Œè¾¹æœ‰ä¸€ä¸ªlistï¼Œlistä¸­å°±ä¼šå®šä¹‰äº†å„ç§å¯¹å›¾åƒè¿›è¡Œå¤„ç†çš„æ“ä½œï¼Œå¯ä»¥è®¾ç½®å‡å‡å€¼ï¼Œé™¤æ ‡å‡†å·®ï¼Œéšæœºè£å‰ªï¼Œæ—‹è½¬ï¼Œç¿»è½¬ï¼Œä»¿å°„å˜æ¢</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">__init___</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>txtpath<span class="token punctuation">,</span>transform <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>target_transform <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>ims<span class="token punctuation">,</span>self<span class="token punctuation">.</span>labels <span class="token operator">=</span> read_txt<span class="token punctuation">(</span>txtpath<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>transform <span class="token operator">=</span> transform
    self<span class="token punctuation">.</span>target_transform <span class="token operator">=</span> target_transform<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre><code>     ==__getitem__ å‡½æ•°==ä»ç»™å®šç´¢å¼•å¤„çš„æ•°æ®é›†ä¸­åŠ è½½å¹¶è¿”å›ä¸€ä¸ªæ ·æœ¬idxã€‚åŸºäºç´¢å¼•ï¼Œå®ƒè¯†åˆ«å›¾åƒåœ¨ç£ç›˜ä¸Šçš„ä½ç½®ï¼Œä½¿ç”¨å°†å…¶è½¬æ¢ä¸ºå¼ é‡read_imageï¼Œä» csv æ•°æ®ä¸­æ£€ç´¢ç›¸åº”çš„æ ‡ç­¾self.img_labelsï¼Œè°ƒç”¨å®ƒä»¬çš„å˜æ¢å‡½æ•°ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ï¼Œå¹¶è¿”å›å¼ é‡å›¾åƒå’Œç›¸åº”çš„æ ‡ç­¾ä¸€ä¸ªå…ƒç»„ã€‚
</code></pre>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">:</span>
    im_path <span class="token operator">=</span> self<span class="token punctuation">.</span>ims<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
       label <span class="token operator">=</span> self<span class="token punctuation">.</span>labels<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
    <span class="token comment"># åˆ©ç”¨Image.openå¯¹å›¾ç‰‡è¿›è¡Œè¯»å–ï¼Œimgç±»å‹ä¸º Image ï¼Œmode=â€˜RGBâ€™</span>
    image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>im_path<span class="token punctuation">)</span> 
    transf <span class="token operator">=</span> transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> transf<span class="token punctuation">(</span>image<span class="token punctuation">)</span>
    label <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>np<span class="token punctuation">.</span>asarry<span class="token punctuation">(</span>label<span class="token punctuation">,</span>dtype <span class="token operator">=</span> np<span class="token punctuation">.</span>int32<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">long</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> image<span class="token punctuation">,</span>label<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>â€‹         <strong>len</strong> å‡½æ•°è¿”å›æˆ‘ä»¬æ•°æ®é›†ä¸­çš„æ ·æœ¬æ•°</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ims<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<h3><span id="3-åˆ¶ä½œåŒ…å«è·¯å¾„å’Œæ ‡ç­¾çš„txtæ–‡ä»¶">3ã€åˆ¶ä½œåŒ…å«è·¯å¾„å’Œæ ‡ç­¾çš„txtæ–‡ä»¶</span></h3><p>è·¯å¾„å»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œä»¥é˜²æ–‡ä»¶ç›¸å¯¹ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶è¯»å–å¤±è´¥ã€‚<br>æ ‡ç­¾ä¸€å®šè¦æ˜¯<strong>æ•´å‹</strong>å˜é‡ï¼ˆå¼ é‡æ±‚æ¢¯åº¦ï¼‰ï¼Œä¸€å®šè¦ä»0å¼€å§‹ã€‚</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> random

datapath <span class="token operator">=</span> <span class="token string">r'ResizedData'</span><span class="token comment"># è®­ç»ƒæ•°æ®</span>
absolutePath <span class="token operator">=</span> <span class="token string">r'D:\data'</span><span class="token comment"># è¿™é‡Œéœ€è¦æ›¿æ¢æˆcatvsdogçš„ç»å¯¹è·¯å¾„</span>
label <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> dataclass <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>datapath<span class="token punctuation">)</span><span class="token punctuation">:</span>
        
        <span class="token comment"># è¯»å–çŒ«ç‹—æ•°æ®  ##ç›´æ¥è¿”å›è¿™ä¸€ï¼ˆæ‹¼æ¥ï¼‰è·¯å¾„ä¸‹æ–‡ä»¶ç»„æˆçš„åˆ—è¡¨</span>
        data <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>datapath<span class="token punctuation">,</span>dataclass<span class="token punctuation">)</span><span class="token punctuation">)</span>
        random<span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

        <span class="token comment"># è®­ç»ƒé›†å¤§å°ï¼šå æ‰€æœ‰æ•°æ®çš„4/5.  # å°†å›¾ç‰‡æŒ‰ç…§8:2åˆ’åˆ†ä¸ºè®­ç»ƒã€éªŒè¯</span>
        train_len <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">//</span> <span class="token number">5</span>
        train_list<span class="token punctuation">,</span>test_list <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token punctuation">:</span>train_len<span class="token punctuation">]</span><span class="token punctuation">,</span>data<span class="token punctuation">[</span>train_len<span class="token punctuation">:</span><span class="token punctuation">]</span>

        <span class="token comment"># å°†è®­ç»ƒé›†å†™å…¥train.txt</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>absolutePath<span class="token punctuation">,</span><span class="token string">'train.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">)</span><span class="token keyword">as</span> f<span class="token punctuation">:</span>
            <span class="token keyword">for</span> img <span class="token keyword">in</span> train_list<span class="token punctuation">:</span>
                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>absolutePath<span class="token punctuation">,</span>datapath<span class="token punctuation">,</span>dataclass<span class="token punctuation">,</span>img<span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ ‡ç­¾ä¸º{}çš„è®­ç»ƒé›†å›¾ç‰‡å¤„ç†å®Œæ¯•"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataclass<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment"># å°†éªŒè¯é›†å†™å…¥test.txt</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>absolutePath<span class="token punctuation">,</span><span class="token string">'test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">)</span><span class="token keyword">as</span> f<span class="token punctuation">:</span>
            <span class="token keyword">for</span> img <span class="token keyword">in</span> test_list<span class="token punctuation">:</span>
                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>absolutePath<span class="token punctuation">,</span>datapath<span class="token punctuation">,</span>dataclass<span class="token punctuation">,</span>img<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ ‡ç­¾ä¸º{}çš„éªŒè¯é›†å›¾ç‰‡å¤„ç†å®Œæ¯•"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataclass<span class="token punctuation">)</span><span class="token punctuation">)</span>

        label<span class="token operator">+=</span><span class="token number">1</span>
        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="3-è¯»å–txtæ–‡ä»¶ç»§æ‰¿dataset">3ã€è¯»å–txtæ–‡ä»¶ï¼Œç»§æ‰¿Dataset</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>dataset <span class="token keyword">import</span> Dataset
<span class="token keyword">import</span> torchvision<span class="token punctuation">.</span>transforms <span class="token keyword">as</span> transforms

<span class="token keyword">def</span> <span class="token function">read_txt</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ims<span class="token punctuation">,</span>labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> sample <span class="token keyword">in</span> <span class="token builtin">file</span><span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            im<span class="token punctuation">,</span>label <span class="token operator">=</span> sample<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>spilt<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span>
            ims<span class="token punctuation">.</span>append<span class="token punctuation">(</span>im<span class="token punctuation">)</span>
            labels<span class="token punctuation">.</span>append<span class="token punctuation">(</span>label<span class="token punctuation">)</span>
    <span class="token keyword">return</span> ims<span class="token punctuation">,</span>labels

<span class="token keyword">class</span> <span class="token class-name">Dataset</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># txtpathå°±æ˜¯ä¸Šé¢æåˆ°çš„listï¼Œå…¶ä¸€ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªæ ·æœ¬çš„è·¯å¾„å’Œæ ‡ç­¾ï¼Œå…¶å®å°±æ˜¯txtä¸­çš„ä¸€è¡Œ</span>
    <span class="token keyword">def</span> <span class="token function">__init___</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>txtpath<span class="token punctuation">,</span>transform <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ims<span class="token punctuation">,</span>self<span class="token punctuation">.</span>labels <span class="token operator">=</span> read_txt<span class="token punctuation">(</span>txtpath<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>transform <span class="token operator">=</span> transform
    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">:</span>
        image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>im_path<span class="token punctuation">)</span>
        transf <span class="token operator">=</span> transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        image <span class="token operator">=</span> transf<span class="token punctuation">(</span>image<span class="token punctuation">)</span>
        label <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>np<span class="token punctuation">.</span>asarry<span class="token punctuation">(</span>label<span class="token punctuation">,</span>dtype <span class="token operator">=</span> np<span class="token punctuation">.</span>int32<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">long</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> image<span class="token punctuation">,</span>label
    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ims<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1><span id="pså¤„ç†ç¼ºå¤±æ•°æ®">ps:å¤„ç†ç¼ºå¤±æ•°æ®</span></h1><pre class="line-numbers language-python" data-language="python"><code class="language-python">inputs<span class="token punctuation">,</span> outputs <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token comment"># æ•°å€¼</span>
inputs <span class="token operator">=</span> inputs<span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>inputs<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># æ’å€¼</span>
<span class="token comment"># ä¸æ˜¯æ•°å€¼ï¼ŒæŠŠè¿™ç‰¹åˆ«çš„ç±»è½¬ä¸ºå€¼</span>
inputs <span class="token operator">=</span> pd<span class="token punctuation">.</span>get_dummies<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span>dummy_na<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
x<span class="token punctuation">,</span>y <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>inputs<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">,</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>outputs<span class="token punctuation">.</span>values<span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/01/opencv/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/01/opencv/" class="post-title-link" itemprop="url">opencv</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-01 19:42:08 / ä¿®æ”¹æ—¶é—´ï¼š19:45:38" itemprop="dateCreated datePublished" datetime="2022-04-01T19:42:08+08:00">2022-04-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®å¤„ç†</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#1-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">1ã€åŸºæœ¬æ“ä½œ</a><ul>
<li><a href="#1-%E5%9B%BE%E5%83%8F%E7%9A%84io%E6%93%8D%E4%BD%9C">1ã€å›¾åƒçš„IOæ“ä½œ</a></li>
<li><a href="#2-%E5%B1%9E%E6%80%A7">2ã€å±æ€§</a></li>
<li><a href="#3-%E9%80%9A%E9%81%93">3ã€é€šé“</a></li>
<li><a href="#4-%E7%AE%97%E6%9C%AF%E6%93%8D%E4%BD%9C">4ã€ç®—æœ¯æ“ä½œ</a></li>
</ul>
</li>
<li><a href="#2-%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86">2ã€å›¾åƒå¤„ç†</a><ul>
<li><a href="#1-%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2">1ã€å‡ ä½•å˜æ¢</a><ul>
<li><a href="#11%E5%9B%BE%E5%83%8F%E7%BC%A9%E6%94%BE">1.1å›¾åƒç¼©æ”¾</a></li>
<li><a href="#12%E5%9B%BE%E5%83%8F%E5%B9%B3%E7%A7%BB">1.2å›¾åƒå¹³ç§»</a></li>
<li><a href="#13%E5%9B%BE%E5%83%8F%E6%97%8B%E8%BD%AC">1.3å›¾åƒæ—‹è½¬</a></li>
<li><a href="#14%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA">1.4ä»£ç å±•ç¤º</a></li>
</ul>
</li>
<li><a href="#2-%E5%BD%A2%E6%80%81%E5%AD%A6%E6%93%8D%E4%BD%9C">2ã€å½¢æ€å­¦æ“ä½œ</a></li>
<li><a href="#3-%E5%9B%BE%E5%83%8F%E5%B9%B3%E6%BB%91">3ã€å›¾åƒå¹³æ»‘</a><ul>
<li><a href="#31%E5%9B%BE%E5%83%8F%E5%99%AA%E5%A3%B0">3.1å›¾åƒå™ªå£°</a></li>
<li><a href="#32%E5%9B%BE%E5%83%8F%E5%B9%B3%E6%BB%91">3.2å›¾åƒå¹³æ»‘</a></li>
<li><a href="#33-%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA">3.3 ä»£ç å±•ç¤º</a></li>
</ul>
</li>
<li><a href="#4-%E7%9B%B4%E6%96%B9%E5%9B%BE">4ã€ç›´æ–¹å›¾</a><ul>
<li><a href="#41-%E7%BB%98%E5%88%B6%E7%9B%B4%E6%96%B9%E5%9B%BE">4.1 ç»˜åˆ¶ç›´æ–¹å›¾</a></li>
<li><a href="#42-%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%9D%87%E8%A1%A1%E5%8C%96">4.2 ç›´æ–¹å›¾å‡è¡¡åŒ–</a></li>
</ul>
</li>
<li><a href="#5-%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B">5ã€è¾¹ç¼˜æ£€æµ‹</a><ul>
<li><a href="#51-sobel%E6%A3%80%E6%B5%8B%E7%AE%97%E5%AD%90-scharr%E7%AE%97%E5%AD%90">5.1 Sobelæ£€æµ‹ç®—å­ / Scharrç®—å­</a></li>
<li><a href="#52-laplacian%E7%AE%97%E5%AD%90">5.2 Laplacianç®—å­</a></li>
<li><a href="#53-canny%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B">5.3 Cannyè¾¹ç¼˜æ£€æµ‹</a></li>
<li><a href="#54-%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA">5.4 ä»£ç å±•ç¤º</a></li>
</ul>
</li>
<li><a href="#6-%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D">6ã€æ¨¡æ¿åŒ¹é…</a><ul>
<li><a href="#62-%E9%9C%8D%E5%A4%AB%E5%8F%98%E6%8D%A2">6.2 éœå¤«å˜æ¢</a></li>
</ul>
</li>
<li><a href="#7-%E4%BA%8C%E5%80%BC%E5%8C%96">7ã€äºŒå€¼åŒ–</a><ul>
<li><a href="#71-%E5%85%A8%E5%B1%80%E4%BA%8C%E5%80%BC%E5%8C%96">7.1 å…¨å±€äºŒå€¼åŒ–</a></li>
<li><a href="#72-%E5%B1%80%E9%83%A8%E4%BA%8C%E5%80%BC%E5%8C%96">7.2 å±€éƒ¨äºŒå€¼åŒ–</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3-%E8%89%B2%E5%BD%A9%E6%8A%96%E5%8A%A8">3ã€è‰²å½©æŠ–åŠ¨</a></li>
<li><a href="#4-%E8%89%B2%E5%9F%9F%E8%BD%AC%E6%8D%A2">4ã€è‰²åŸŸè½¬æ¢</a></li>
<li><a href="#5-%E4%BA%AE%E5%BA%A6%E5%92%8C%E5%AF%B9%E6%AF%94%E5%BA%A6">5ã€äº®åº¦å’Œå¯¹æ¯”åº¦</a></li>
</ul>
<!-- tocstop -->

<h1><span id="1-åŸºæœ¬æ“ä½œ">1ã€åŸºæœ¬æ“ä½œ</span></h1><h2><span id="1-å›¾åƒçš„ioæ“ä½œ">1ã€å›¾åƒçš„IOæ“ä½œ</span></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2 <span class="token keyword">as</span> cv

<span class="token comment"># è¯»å–å›¾åƒ</span>
<span class="token comment"># cv.imread(.jpg,0)</span>
<span class="token comment"># æœ‰ä¸­æ–‡è·¯å¾„ï¼Œé€šå¸¸å€ŸåŠ©numpyæ“ä½œ</span>
img <span class="token operator">=</span> cv<span class="token punctuation">.</span>imdecode<span class="token punctuation">(</span>np<span class="token punctuation">.</span>fromfile<span class="token punctuation">(</span>path"<span class="token punctuation">,</span>dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">'''
cv.IMREAD*COLORï¼šä»¥å½©è‰²æ¨¡å¼åŠ è½½å›¾åƒï¼Œä»»ä½•å›¾åƒçš„é€æ˜åº¦éƒ½å°†è¢«å¿½ç•¥ã€‚è¿™æ˜¯é»˜è®¤å‚æ•°ã€‚
cv.IMREAD*GRAYSCALEï¼šä»¥ç°åº¦æ¨¡å¼åŠ è½½å›¾åƒ
cv.IMREAD_UNCHANGEDï¼šåŒ…æ‹¬alphaé€šé“çš„åŠ è½½å›¾åƒæ¨¡å¼ã€‚
å¯ä»¥ä½¿ç”¨1ã€0æˆ–è€…-1æ¥æ›¿ä»£ä¸Šé¢ä¸‰ä¸ªæ ‡å¿—
'''</span>

<span class="token comment"># æ˜¾ç¤ºå›¾åƒ</span>
cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span>
cv<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># ç•™æ—¶é—´</span>

<span class="token comment"># ä¿å­˜å›¾åƒ</span>
cv<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"åå­—"</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2><span id="2-å±æ€§">2ã€å±æ€§</span></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">img<span class="token punctuation">.</span>shape <span class="token comment">#å½¢çŠ¶</span>
img<span class="token punctuation">.</span>size <span class="token comment">#å¤§å°</span>
img<span class="token punctuation">.</span>dtype <span class="token comment">#ç±»å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2><span id="3-é€šé“">3ã€é€šé“</span></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># é€šé“æ‹†åˆ†</span>
b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r <span class="token operator">=</span> cv<span class="token punctuation">.</span>split<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
<span class="token comment"># é€šé“åˆå¹¶</span>
img <span class="token operator">=</span> cv<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2><span id="4-ç®—æœ¯æ“ä½œ">4ã€ç®—æœ¯æ“ä½œ</span></h2><p>å‰æï¼šä¸¤å¹…å›¾å¤§å°å¿…é¡»ç›¸åŒ</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åŠ èµ·æ¥</span>
img <span class="token operator">=</span> cv<span class="token punctuation">.</span>add<span class="token punctuation">(</span>img1<span class="token punctuation">,</span>img2<span class="token punctuation">)</span>

<span class="token comment"># æŒ‰æ¯”ä¾‹æ··åˆ</span>
img3 <span class="token operator">=</span> cv<span class="token punctuation">.</span>addWeighted<span class="token punctuation">(</span>img1<span class="token punctuation">,</span><span class="token number">0.7</span><span class="token punctuation">,</span>img2<span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1><span id="2-å›¾åƒå¤„ç†">2ã€å›¾åƒå¤„ç†</span></h1><p>img.<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=shape&amp;spm=1001.2101.3001.7020">shape</a>[ : 2] è¡¨ç¤ºå–å½©è‰²å›¾ç‰‡çš„é•¿ã€å®½ã€‚<br>img.shape[ : 3] åˆ™è¡¨ç¤ºå–å½©è‰²å›¾ç‰‡çš„é•¿ã€å®½ã€<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E9%80%9A%E9%81%93&amp;spm=1001.2101.3001.7020">é€šé“</a>ã€‚</p>
<h2><span id="1-å‡ ä½•å˜æ¢">1ã€å‡ ä½•å˜æ¢</span></h2><h3><span id="11å›¾åƒç¼©æ”¾">1.1å›¾åƒç¼©æ”¾</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img<span class="token punctuation">,</span>dsize<span class="token punctuation">,</span>fx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>fy<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>interpolation<span class="token operator">=</span>cv<span class="token punctuation">.</span>INTER_LINEAR<span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
dsize: ç»å¯¹å°ºå¯¸ï¼Œç›´æ¥æŒ‡å®šè°ƒæ•´åå›¾åƒçš„å¤§å°
fx,fy: ç›¸å¯¹å°ºå¯¸ï¼Œå°†dsizeè®¾ç½®ä¸ºNoneï¼Œç„¶åå°†fxå’Œfyè®¾ç½®ä¸ºæ¯”ä¾‹å› å­å³å¯
'''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="12å›¾åƒå¹³ç§»">1.2å›¾åƒå¹³ç§»</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">cv<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img<span class="token punctuation">,</span>M<span class="token punctuation">,</span>dsize<span class="token punctuation">)</span> <span class="token comment"># Mï¼š 2*âˆ—3ç§»åŠ¨çŸ©é˜µ</span>

M <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># å¹³ç§»çŸ©é˜µ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><img src="/2022/04/01/opencv/image-20220326161142162.png" alt="image-20220326161142162"></p>
<h3><span id="13å›¾åƒæ—‹è½¬">1.3å›¾åƒæ—‹è½¬</span></h3><p>åœ¨OpenCVä¸­å›¾åƒæ—‹è½¬é¦–å…ˆæ ¹æ®æ—‹è½¬è§’åº¦å’Œæ—‹è½¬ä¸­å¿ƒè·å–æ—‹è½¬çŸ©é˜µï¼Œç„¶åæ ¹æ®æ—‹è½¬çŸ©é˜µè¿›è¡Œå˜æ¢ï¼Œå³å¯å®ç°ä»»æ„è§’åº¦å’Œä»»æ„ä¸­å¿ƒçš„æ—‹è½¬æ•ˆæœã€‚</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># è¿”å›ä¸€ä¸ªçŸ©é˜µ</span>
cv<span class="token punctuation">.</span>getRotationMatrix2D<span class="token punctuation">(</span>center<span class="token punctuation">,</span> angle<span class="token punctuation">,</span> scale<span class="token punctuation">)</span>

M <span class="token operator">=</span> cv<span class="token punctuation">.</span>getRotationMatrix2D<span class="token punctuation">(</span><span class="token punctuation">(</span>cols<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>rows<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
dst <span class="token operator">=</span> cv<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img<span class="token punctuation">,</span>M<span class="token punctuation">,</span><span class="token punctuation">(</span>cols<span class="token punctuation">,</span>rows<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">'''
centerï¼šæ—‹è½¬ä¸­å¿ƒ
angleï¼šæ—‹è½¬è§’åº¦
scaleï¼šç¼©æ”¾æ¯”ä¾‹
'''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="14ä»£ç å±•ç¤º">1.4ä»£ç å±•ç¤º</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2 <span class="token keyword">as</span> cv
<span class="token keyword">import</span> os
<span class="token keyword">import</span> d2data
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib

img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>imdecode<span class="token punctuation">(</span>np<span class="token punctuation">.</span>fromfile<span class="token punctuation">(</span><span class="token string">r"./æµ·è´¼å›¾ç‰‡/1.jpg"</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 1ã€å›¾åƒç¼©æ”¾</span>
<span class="token comment"># ç»å¯¹å°ºå¯¸</span>
rows<span class="token punctuation">,</span>cols <span class="token operator">=</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>  <span class="token comment"># åŸæ¥å½¢çŠ¶</span>
res <span class="token operator">=</span> cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img1<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>cols<span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">*</span>rows<span class="token punctuation">)</span><span class="token punctuation">,</span>interpolation<span class="token operator">=</span>cv<span class="token punctuation">.</span>INTER_CUBIC<span class="token punctuation">)</span>
<span class="token comment"># ç›¸å¯¹å°ºå¯¸</span>
res1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img1<span class="token punctuation">,</span><span class="token boolean">None</span><span class="token punctuation">,</span>fx<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span>fy<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>

<span class="token comment"># 2ã€å›¾åƒå¹³ç§»</span>
M <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å¹³ç§»çŸ©é˜µ</span>
dstyi <span class="token operator">=</span> cv<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img1<span class="token punctuation">,</span>M<span class="token punctuation">,</span><span class="token punctuation">(</span>cols<span class="token punctuation">,</span>rows<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 3ã€å›¾åƒæ—‹è½¬</span>
M <span class="token operator">=</span> cv<span class="token punctuation">.</span>getRotationMatrix2D<span class="token punctuation">(</span><span class="token punctuation">(</span>cols<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>rows<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
dstzhuan <span class="token operator">=</span> cv<span class="token punctuation">.</span>warpAffine<span class="token punctuation">(</span>img1<span class="token punctuation">,</span>M<span class="token punctuation">,</span><span class="token punctuation">(</span>cols<span class="token punctuation">,</span>rows<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># å›¾åƒå±•ç¤º</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
fig<span class="token punctuation">,</span>axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>nrows<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>ncols<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dpi<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"ç»å¯¹å°ºåº¦ï¼ˆæ”¾å¤§ï¼‰"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>img1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"åŸå›¾"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>res1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"ç›¸å¯¹å°ºåº¦ï¼ˆç¼©å°ï¼‰"</span><span class="token punctuation">)</span>

axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>img1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"åŸå›¾"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>dstyi<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"å¹³ç§»åç»“æœ"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>dstzhuan<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"æ—‹è½¬åç»“æœ"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/2022/04/01/opencv/image-20220326162736138.png" alt="image-20220326162736138"></p>
<h2><span id="2-å½¢æ€å­¦æ“ä½œ">2ã€å½¢æ€å­¦æ“ä½œ</span></h2><h2><span id="3-å›¾åƒå¹³æ»‘">3ã€å›¾åƒå¹³æ»‘</span></h2><h3><span id="31å›¾åƒå™ªå£°">3.1å›¾åƒå™ªå£°</span></h3><p><strong>æ¤’ç›å™ªå£°</strong>ï¼šä¸€ç§éšæœºå‡ºç°çš„ç™½ç‚¹æˆ–è€…é»‘ç‚¹ï¼Œå¯èƒ½æ˜¯äº®çš„åŒºåŸŸæœ‰é»‘è‰²åƒç´ æˆ–æ˜¯åœ¨æš—çš„åŒºåŸŸæœ‰ç™½è‰²åƒç´ ï¼ˆæˆ–æ˜¯ä¸¤è€…çš†æœ‰ï¼‰</p>
<p><strong>é«˜æ–¯å™ªå£°</strong>ï¼šå™ªå£°å¯†åº¦å‡½æ•°æœä»é«˜æ–¯åˆ†å¸ƒ</p>
<h3><span id="32å›¾åƒå¹³æ»‘">3.2å›¾åƒå¹³æ»‘</span></h3><p>å›¾åƒå¹³æ»‘ä»ä¿¡å·å¤„ç†çš„è§’åº¦çœ‹å°±æ˜¯å»é™¤å…¶ä¸­çš„é«˜é¢‘ä¿¡æ¯ï¼Œ<strong>ä¿ç•™ä½é¢‘ä¿¡æ¯</strong></p>
<p>ä½é€šæ»¤æ³¢å¯ä»¥å»é™¤å›¾åƒä¸­çš„å™ªå£°ï¼Œå¯¹å›¾åƒè¿›è¡Œå¹³æ»‘</p>
<p><strong>å‡å€¼æ»¤æ³¢:</strong><br>å®ƒåªæ˜¯ç”¨å·ç§¯æ¡†è¦†ç›–åŒºåŸŸæ‰€æœ‰åƒç´ çš„å¹³å‡å€¼æ¥ä»£æ›¿ä¸­å¿ƒå…ƒç´ ã€‚<br>å»å™ªçš„åŒæ—¶å»é™¤äº†å¾ˆå¤šç»†èŠ‚éƒ¨åˆ†ï¼Œå°†å›¾åƒå˜å¾—æ¨¡ç³Šã€‚</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">cv<span class="token punctuation">.</span>blur<span class="token punctuation">(</span>img<span class="token punctuation">,</span> ksize<span class="token punctuation">,</span> anchor<span class="token punctuation">,</span> borderType<span class="token punctuation">)</span>
<span class="token comment"># ksizeï¼šå·ç§¯æ ¸çš„å¤§å°</span>
<span class="token comment"># anchorï¼šé»˜è®¤å€¼ (-1,-1) ï¼Œè¡¨ç¤ºæ ¸ä¸­å¿ƒ</span>
<span class="token comment"># borderTypeï¼šè¾¹ç•Œç±»å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>é«˜æ–¯æ»¤æ³¢</strong>:</p>
<p>å°†â€ä¸­å¿ƒç‚¹â€ä½œä¸ºåŸç‚¹ï¼Œå…¶ä»–ç‚¹æŒ‰ç…§å…¶åœ¨æ­£æ€æ›²çº¿ä¸Šçš„ä½ç½®ï¼Œåˆ†é…æƒé‡ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŠ æƒå¹³å‡å€¼</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">cv<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>img<span class="token punctuation">,</span>ksize<span class="token punctuation">,</span>sigmaX<span class="token punctuation">,</span>sigmay<span class="token punctuation">,</span>borderType<span class="token punctuation">)</span>
<span class="token comment"># ksize:é«˜æ–¯å·ç§¯æ ¸çš„å¤§å°ï¼Œæ³¨æ„ ï¼š å·ç§¯æ ¸çš„å®½åº¦å’Œé«˜åº¦éƒ½åº”ä¸ºå¥‡æ•°ï¼Œä¸”å¯ä»¥ä¸åŒ</span>
<span class="token comment"># sigmaX: æ°´å¹³æ–¹å‘çš„æ ‡å‡†å·®</span>
<span class="token comment"># sigmaY: å‚ç›´æ–¹å‘çš„æ ‡å‡†å·®ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸sigmaXç›¸åŒ</span>
<span class="token comment"># borderType:å¡«å……è¾¹ç•Œç±»å‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>ä¸­å€¼æ»¤æ³¢</strong>ï¼š</p>
<p>ç”¨åƒç´ ç‚¹é‚»åŸŸç°åº¦å€¼çš„ä¸­å€¼æ¥ä»£æ›¿è¯¥åƒç´ ç‚¹çš„ç°åº¦å€¼ã€‚</p>
<p>å¯¹æ¤’ç›å™ªå£°æ¥è¯´å°¤å…¶æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¾èµ–äºé‚»åŸŸå†…é‚£äº›ä¸å…¸å‹å€¼å·®åˆ«å¾ˆå¤§çš„å€¼ã€‚</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">cv<span class="token punctuation">.</span>medianBlur<span class="token punctuation">(</span>src<span class="token punctuation">,</span> ksize<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3><span id="33-ä»£ç å±•ç¤º">3.3 ä»£ç å±•ç¤º</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2 <span class="token keyword">as</span> cv
<span class="token keyword">import</span> os
<span class="token keyword">import</span> d2data
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib

<span class="token comment"># å°†å›¾ç‰‡åŠ å…¥é»‘ç‚¹ï¼ˆç±»ä¼¼æ¤’ç›å™ªå£°ï¼‰</span>
img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>imdecode<span class="token punctuation">(</span>np<span class="token punctuation">.</span>fromfile<span class="token punctuation">(</span><span class="token string">r"./æµ·è´¼å›¾ç‰‡/z.jpg"</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 1ã€å‡å€¼æ»¤æ³¢</span>
blur1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>blur<span class="token punctuation">(</span>img1<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 2ã€é«˜æ–¯æ»¤æ³¢</span>
blur2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>img1<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 3ã€ä¸­å€¼æ»¤æ³¢</span>
blur3 <span class="token operator">=</span> cv<span class="token punctuation">.</span>medianBlur<span class="token punctuation">(</span>img1<span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>

<span class="token comment"># å›¾åƒå±•ç¤º</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
fig<span class="token punctuation">,</span>axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>nrows<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>ncols<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dpi<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>blur1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"å‡å€¼æ»¤æ³¢"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>img1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"åŸå›¾"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>blur2<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"é«˜æ–¯æ»¤æ³¢"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>blur3<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"ä¸­å€¼æ»¤æ³¢"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/2022/04/01/opencv/image-20220326185011554.png" alt="image-20220326185011554"></p>
<h2><span id="4-ç›´æ–¹å›¾">4ã€ç›´æ–¹å›¾</span></h2><h3><span id="41-ç»˜åˆ¶ç›´æ–¹å›¾">4.1 ç»˜åˆ¶ç›´æ–¹å›¾</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">cv2<span class="token punctuation">.</span>calcHist<span class="token punctuation">(</span>images<span class="token punctuation">,</span>channels<span class="token punctuation">,</span>mask<span class="token punctuation">,</span>histSize<span class="token punctuation">,</span>ranges<span class="token punctuation">[</span><span class="token punctuation">,</span>hist<span class="token punctuation">[</span><span class="token punctuation">,</span>accumulate<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># channels: å¦‚æœè¾“å…¥å›¾åƒæ˜¯ç°åº¦å›¾ï¼Œå®ƒçš„å€¼å°±æ˜¯ [0]ï¼›å¦‚æœæ˜¯å½©è‰²å›¾åƒçš„è¯ï¼Œä¼ å…¥çš„å‚æ•°å¯ä»¥æ˜¯ [0]ï¼Œ[1]ï¼Œ[2] å®ƒä»¬åˆ†åˆ«å¯¹åº”ç€é€šé“ Bï¼ŒGï¼ŒRã€‚ ã€€ã€€</span>
<span class="token comment"># mask: æ©æ¨¡å›¾åƒã€‚è¦ç»Ÿè®¡æ•´å¹…å›¾åƒçš„ç›´æ–¹å›¾å°±æŠŠå®ƒè®¾ä¸º Noneã€‚ä½†æ˜¯å¦‚æœä½ æƒ³ç»Ÿè®¡å›¾åƒæŸä¸€éƒ¨åˆ†çš„ç›´æ–¹å›¾çš„è¯ï¼Œä½ å°±éœ€è¦åˆ¶ä½œä¸€ä¸ªæ©æ¨¡å›¾åƒï¼Œå¹¶ä½¿ç”¨å®ƒã€‚ï¼ˆåè¾¹æœ‰ä¾‹å­ï¼‰ ã€€ã€€</span>
<span class="token comment"># histSize:BIN çš„æ•°ç›®ã€‚ä¹Ÿåº”è¯¥ç”¨ä¸­æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¾‹å¦‚ï¼š[256]ã€‚ ã€€ã€€</span>
<span class="token comment"># ranges: åƒç´ å€¼èŒƒå›´ï¼Œé€šå¸¸ä¸º [0ï¼Œ256]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="42-ç›´æ–¹å›¾å‡è¡¡åŒ–">4.2 ç›´æ–¹å›¾å‡è¡¡åŒ–</span></h3><p>è¿™ç§æ–¹æ³•<strong>æé«˜å›¾åƒæ•´ä½“çš„å¯¹æ¯”åº¦</strong>ï¼Œç‰¹åˆ«æ˜¯æœ‰ç”¨æ•°æ®çš„åƒç´ å€¼åˆ†å¸ƒæ¯”è¾ƒæ¥è¿‘æ—¶ï¼Œå¯ä»¥æé«˜éª¨æ¶ç»“æ„çš„æ˜¾ç¤ºï¼Œå¦å¤–åœ¨æ›å…‰è¿‡åº¦æˆ–ä¸è¶³çš„å›¾åƒä¸­å¯ä»¥æ›´å¥½çš„çªå‡ºç»†èŠ‚ã€‚</p>
<p><strong>è‡ªé€‚åº”çš„ç›´æ–¹å›¾å‡è¡¡åŒ–</strong>ï¼šæ•´å¹…å›¾åƒä¼šè¢«åˆ†æˆå¾ˆå¤šå°å—ï¼Œè¿™äº›å°å—è¢«ç§°ä¸ºâ€œtilesâ€ï¼ˆåœ¨ OpenCV ä¸­ tiles çš„ å¤§å°é»˜è®¤æ˜¯ 8x8ï¼‰ï¼Œç„¶åå†å¯¹æ¯ä¸€ä¸ªå°å—åˆ†åˆ«è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">dst <span class="token operator">=</span> cv<span class="token punctuation">.</span>equalizeHist<span class="token punctuation">(</span>img<span class="token punctuation">)</span>

<span class="token comment"># è‡ªé€‚åº”çš„ç›´æ–¹å›¾å‡è¡¡åŒ–</span>
clahe <span class="token operator">=</span> cv<span class="token punctuation">.</span>createCLAHE<span class="token punctuation">(</span>clipLimit<span class="token punctuation">,</span> tileGridSize<span class="token punctuation">)</span>
res <span class="token operator">=</span> clahe<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>
<span class="token comment"># clipLimit: å¯¹æ¯”åº¦é™åˆ¶ï¼Œé»˜è®¤æ˜¯40</span>
<span class="token comment"># tileGridSize: åˆ†å—çš„å¤§å°ï¼Œé»˜è®¤ä¸º8*8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2><span id="5-è¾¹ç¼˜æ£€æµ‹">5ã€è¾¹ç¼˜æ£€æµ‹</span></h2><p>æ ‡è¯†æ•°å­—å›¾åƒä¸­äº®åº¦å˜åŒ–æ˜æ˜¾çš„ç‚¹</p>
<p><strong>åŸºäºæœç´¢</strong>ï¼šé€šè¿‡å¯»æ‰¾å›¾åƒä¸€é˜¶å¯¼æ•°ä¸­çš„æœ€å¤§å€¼æ¥æ£€æµ‹è¾¹ç•Œï¼Œç„¶ååˆ©ç”¨è®¡ç®—ç»“æœä¼°è®¡è¾¹ç¼˜çš„å±€éƒ¨æ–¹å‘ï¼Œé€šå¸¸é‡‡ç”¨æ¢¯åº¦çš„æ–¹å‘ï¼Œå¹¶åˆ©ç”¨æ­¤æ–¹å‘æ‰¾åˆ°å±€éƒ¨æ¢¯åº¦æ¨¡çš„æœ€å¤§å€¼ï¼Œä»£è¡¨ç®—æ³•æ˜¯Sobelç®—å­å’ŒScharrç®—å­ã€‚</p>
<p><strong>åŸºäºé›¶ç©¿è¶Š</strong>ï¼šé€šè¿‡å¯»æ‰¾å›¾åƒäºŒé˜¶å¯¼æ•°é›¶ç©¿è¶Šæ¥å¯»æ‰¾è¾¹ç•Œï¼Œä»£è¡¨ç®—æ³•æ˜¯Laplacianç®—å­ã€‚</p>
<h3><span id="51-sobelæ£€æµ‹ç®—å­-scharrç®—å­">5.1 Sobelæ£€æµ‹ç®—å­ / Scharrç®—å­</span></h3><p>Sobelç®—å­ï¼š<strong>é«˜æ–¯å¹³æ»‘</strong>ä¸å¾®åˆ†æ“ä½œçš„ç»“åˆä½“ï¼Œæ‰€ä»¥å…¶<strong>æŠ—å™ªå£°èƒ½åŠ›</strong>å¾ˆå¼ºï¼Œç”¨é€”è¾ƒå¤šã€‚å°¤å…¶æ˜¯æ•ˆç‡è¦æ±‚è¾ƒé«˜ï¼Œè€Œå¯¹<strong>ç»†çº¹ç†ä¸å¤ªå…³å¿ƒ</strong>çš„æ—¶å€™ã€‚</p>
<p>Sobelç®—å­æ˜¯åœ¨ä¸¤ä¸ªæ–¹å‘è®¡ç®—çš„, cv2.addWeighted( )å‡½æ•°å°†å…¶ç»„åˆ</p>
<p>Scharrç®—å­ï¼šä½†è¯¥å‡½æ•°ä»…ä½œç”¨äºå¤§å°ä¸º<strong>3çš„å†…æ ¸</strong>ã€‚è¯¥å‡½æ•°çš„è¿ç®—ä¸Sobelå‡½æ•°ä¸€æ ·å¿«ï¼Œä½†ç»“æœå´æ›´åŠ ç²¾ç¡®</p>
<p><strong>å¯¹ç°åº¦æ¸å˜å’Œå™ªå£°è¾ƒå¤šçš„å¤„ç†æ•ˆæœæ¯”è¾ƒå¥½</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">Sobel_x_or_y <span class="token operator">=</span> cv<span class="token punctuation">.</span>Sobel<span class="token punctuation">(</span>img<span class="token punctuation">,</span> ddepth<span class="token punctuation">,</span> dx<span class="token punctuation">,</span> dy<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> ksize<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> delta<span class="token punctuation">,</span> borderType<span class="token punctuation">)</span>
Scale_abs <span class="token operator">=</span> cv<span class="token punctuation">.</span>convertScaleAbs<span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># æ ¼å¼è½¬æ¢å‡½æ•°</span>
result <span class="token operator">=</span> cv<span class="token punctuation">.</span>addWeighted<span class="token punctuation">(</span>Sobel_x<span class="token punctuation">,</span> alpha<span class="token punctuation">,</span> Sobel_y<span class="token punctuation">,</span> beta<span class="token punctuation">)</span> <span class="token comment"># å›¾åƒæ··åˆ</span>

<span class="token comment"># ddepth: å›¾åƒçš„æ·±åº¦</span>
<span class="token comment"># dxå’Œdy: æŒ‡æ±‚å¯¼çš„é˜¶æ•°ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œå–å€¼ä¸º0ã€1ã€‚</span>
<span class="token comment"># ksize: æ˜¯Sobelç®—å­çš„å¤§å°ï¼Œå³å·ç§¯æ ¸çš„å¤§å°ï¼Œå¿…é¡»ä¸ºå¥‡æ•°1ã€3ã€5ã€7ï¼Œé»˜è®¤ä¸º3ã€‚</span>
<span class="token comment">#   æ³¨æ„ï¼šå¦‚æœksize=-1ï¼Œå°±æ¼”å˜æˆä¸º3x3çš„Scharrç®—å­ã€‚</span>
<span class="token comment"># scaleï¼šç¼©æ”¾å¯¼æ•°çš„æ¯”ä¾‹å¸¸æ•°ï¼Œé»˜è®¤æƒ…å†µä¸ºæ²¡æœ‰ä¼¸ç¼©ç³»æ•°ã€‚</span>
<span class="token comment"># borderTypeï¼šå›¾åƒè¾¹ç•Œçš„æ¨¡å¼ï¼Œé»˜è®¤å€¼ä¸ºcv2.BORDER_DEFAULTã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="52-laplacianç®—å­">5.2 Laplacianç®—å­</span></h3><p>Laplacianæ˜¯åˆ©ç”¨äºŒé˜¶å¯¼æ•°æ¥æ£€æµ‹è¾¹ç¼˜</p>
<p><strong>é€ æˆè¾¹ç¼˜ä¸¢å¤±</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">laplacian <span class="token operator">=</span> cv<span class="token punctuation">.</span>Laplacian<span class="token punctuation">(</span>img<span class="token punctuation">,</span> ddepth<span class="token punctuation">[</span><span class="token punctuation">,</span> dst<span class="token punctuation">[</span><span class="token punctuation">,</span> ksize<span class="token punctuation">[</span><span class="token punctuation">,</span> scale<span class="token punctuation">[</span><span class="token punctuation">,</span> delta<span class="token punctuation">[</span><span class="token punctuation">,</span> borderType<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># Ddepth: å›¾åƒçš„æ·±åº¦ï¼Œ-1è¡¨ç¤ºé‡‡ç”¨çš„æ˜¯åŸå›¾åƒç›¸åŒçš„æ·±åº¦ï¼Œç›®æ ‡å›¾åƒçš„æ·±åº¦å¿…é¡»å¤§äºç­‰äºåŸå›¾åƒçš„æ·±åº¦ï¼›</span>
<span class="token comment"># ksizeï¼šç®—å­çš„å¤§å°ï¼Œå³å·ç§¯æ ¸çš„å¤§å°ï¼Œå¿…é¡»ä¸º1,3,5,7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h3><span id="53-cannyè¾¹ç¼˜æ£€æµ‹">5.3 Cannyè¾¹ç¼˜æ£€æµ‹</span></h3><p>åŸç†ï¼šå™ªå£°å»é™¤(é«˜æ–¯æ»¤æ³¢å™¨)+è®¡ç®—å›¾åƒæ¢¯åº¦+éæå¤§å€¼æŠ‘åˆ¶+æ»åé˜ˆå€¼ï¼ˆå½“å›¾åƒçš„ç°åº¦æ¢¯åº¦é«˜äº maxVal æ—¶è¢«è®¤ä¸ºæ˜¯çœŸçš„è¾¹ç•Œï¼Œ ä½äº minVal çš„è¾¹ç•Œä¼šè¢«æŠ›å¼ƒï¼‰</p>
<p><strong>ä¸æ˜“å—å™ªå£°å¹²æ‰°ï¼Œå®¹æ˜“æ£€æµ‹å‡ºçœŸæ­£çš„å¼±è¾¹ç¼˜</strong></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">canny <span class="token operator">=</span> cv<span class="token punctuation">.</span>Canny<span class="token punctuation">(</span>img<span class="token punctuation">,</span> threshold1<span class="token punctuation">,</span> threshold2<span class="token punctuation">)</span>
<span class="token comment"># img:ç°åº¦å›¾</span>
<span class="token comment"># threshold1: minvalï¼Œè¾ƒå°çš„é˜ˆå€¼å°†é—´æ–­çš„è¾¹ç¼˜è¿æ¥èµ·æ¥</span>
<span class="token comment"># threshold2: maxvalï¼Œè¾ƒå¤§çš„é˜ˆå€¼æ£€æµ‹å›¾åƒä¸­æ˜æ˜¾çš„è¾¹ç¼˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="54-ä»£ç å±•ç¤º">5.4 ä»£ç å±•ç¤º</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2 <span class="token keyword">as</span> cv
<span class="token keyword">import</span> os
<span class="token keyword">import</span> d2data
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib

img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>imdecode<span class="token punctuation">(</span>np<span class="token punctuation">.</span>fromfile<span class="token punctuation">(</span><span class="token string">r"./æµ·è´¼å›¾ç‰‡/1.jpg"</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 1ã€Sobelç®—å­</span>
x <span class="token operator">=</span> cv<span class="token punctuation">.</span>Sobel<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>CV_16S<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment"># è®¡ç®—Sobelå·ç§¯ç»“æœ</span>
y <span class="token operator">=</span> cv<span class="token punctuation">.</span>Sobel<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>CV_16S<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
Scale_absX <span class="token operator">=</span> cv<span class="token punctuation">.</span>convertScaleAbs<span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment"># convertè½¬æ¢ scaleç¼©æ”¾</span>
Scale_absY <span class="token operator">=</span> cv<span class="token punctuation">.</span>convertScaleAbs<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
result1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>addWeighted<span class="token punctuation">(</span>Scale_absX<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> Scale_absY<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment"># ç»“æœåˆæˆ</span>

<span class="token comment"># 2ã€Scharr</span>
x <span class="token operator">=</span> cv<span class="token punctuation">.</span>Sobel<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>CV_16S<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ksize <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> cv<span class="token punctuation">.</span>Sobel<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>CV_16S<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> ksize <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
Scale_absX <span class="token operator">=</span> cv<span class="token punctuation">.</span>convertScaleAbs<span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span class="token comment"># convertè½¬æ¢ scaleç¼©æ”¾</span>
Scale_absY <span class="token operator">=</span> cv<span class="token punctuation">.</span>convertScaleAbs<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
result2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>addWeighted<span class="token punctuation">(</span>Scale_absX<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> Scale_absY<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># 3ã€Laplacianç®—å­</span>
result3 <span class="token operator">=</span> cv<span class="token punctuation">.</span>Laplacian<span class="token punctuation">(</span>img1<span class="token punctuation">,</span>cv<span class="token punctuation">.</span>CV_16S<span class="token punctuation">)</span>
result3 <span class="token operator">=</span> cv<span class="token punctuation">.</span>convertScaleAbs<span class="token punctuation">(</span>result3<span class="token punctuation">)</span>

<span class="token comment"># 4ã€Canny</span>
img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>imdecode<span class="token punctuation">(</span>np<span class="token punctuation">.</span>fromfile<span class="token punctuation">(</span><span class="token string">r"./æµ·è´¼å›¾ç‰‡/1.jpg"</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># ç°åº¦å›¾</span>
lowThreshold <span class="token operator">=</span> <span class="token number">0</span>
max_lowThreshold <span class="token operator">=</span> <span class="token number">100</span>
result4 <span class="token operator">=</span> cv<span class="token punctuation">.</span>Canny<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> lowThreshold<span class="token punctuation">,</span> max_lowThreshold<span class="token punctuation">)</span>

<span class="token comment"># å›¾åƒå±•ç¤º</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
fig<span class="token punctuation">,</span>axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>nrows<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>ncols<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dpi<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>img1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"åŸå›¾"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>result1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Sobel"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>result2<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Scharr"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>result3<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Laplacian"</span><span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>result4<span class="token punctuation">,</span>cmap <span class="token operator">=</span> plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>gray<span class="token punctuation">)</span>
axes<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Canny"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="/2022/04/01/opencv/image-20220326194617849.png" alt="image-20220326194617849"></p>
<h2><span id="6-æ¨¡æ¿åŒ¹é…">6ã€æ¨¡æ¿åŒ¹é…</span></h2><p>æ¨¡æ¿åŒ¹é… : å°±æ˜¯åœ¨ç»™å®šçš„å›¾ç‰‡ä¸­æŸ¥æ‰¾å’Œæ¨¡æ¿æœ€ç›¸ä¼¼çš„åŒºåŸŸ</p>
<p>ps : å›¾ç‰‡ç•¥å¤§æ¯”è¾ƒå¥½</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">res <span class="token operator">=</span> cv<span class="token punctuation">.</span>matchTemplate<span class="token punctuation">(</span>img<span class="token punctuation">,</span>template<span class="token punctuation">,</span>method<span class="token punctuation">)</span>
min_val<span class="token punctuation">,</span> max_val<span class="token punctuation">,</span> min_loc<span class="token punctuation">,</span> max_loc <span class="token operator">=</span> cv<span class="token punctuation">.</span>minMaxLoc<span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment"># å®šä½æœ€åŒ¹é…çš„åŒºåŸŸï¼Œå¹¶æ ‡æ³¨</span>
<span class="token comment"># img: è¦è¿›è¡Œæ¨¡æ¿åŒ¹é…çš„å›¾åƒ</span>
<span class="token comment"># Template ï¼šæ¨¡æ¿</span>
<span class="token comment"># methodï¼šå®ç°æ¨¡æ¿åŒ¹é…çš„ç®—æ³•ï¼Œä¸»è¦æœ‰ï¼š</span>
<span class="token comment">## å¹³æ–¹å·®åŒ¹é…(CV_TM_SQDIFF)ï¼šåˆ©ç”¨æ¨¡æ¿ä¸å›¾åƒä¹‹é—´çš„å¹³æ–¹å·®è¿›è¡ŒåŒ¹é…ï¼Œæœ€å¥½çš„åŒ¹é…æ˜¯0ï¼ŒåŒ¹é…è¶Šå·®ï¼ŒåŒ¹é…çš„å€¼è¶Šå¤§ã€‚</span>
<span class="token comment">## ç›¸å…³åŒ¹é…(CV_TM_CCORR)ï¼šåˆ©ç”¨æ¨¡æ¿ä¸å›¾åƒé—´çš„ä¹˜æ³•è¿›è¡ŒåŒ¹é…ï¼Œæ•°å€¼è¶Šå¤§è¡¨ç¤ºåŒ¹é…ç¨‹åº¦è¾ƒé«˜ï¼Œè¶Šå°è¡¨ç¤ºåŒ¹é…æ•ˆæœå·®ã€‚ (å®Œå…¨ä¸å¥½ç”¨ï¼ï¼)</span>
<span class="token comment">## åˆ©ç”¨ç›¸å…³ç³»æ•°åŒ¹é…(CV_TM_CCOEFF)ï¼šåˆ©ç”¨æ¨¡æ¿ä¸å›¾åƒé—´çš„ç›¸å…³ç³»æ•°åŒ¹é…ï¼Œ1è¡¨ç¤ºå®Œç¾çš„åŒ¹é…ï¼Œ-1è¡¨ç¤ºæœ€å·®çš„åŒ¹é…ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="62-éœå¤«å˜æ¢">6.2 éœå¤«å˜æ¢</span></h3><p>å¸¸ç”¨æ¥æå–å›¾åƒä¸­çš„ç›´çº¿å’Œåœ†ç­‰å‡ ä½•å½¢çŠ¶</p>
<h2><span id="7-äºŒå€¼åŒ–">7ã€äºŒå€¼åŒ–</span></h2><h3><span id="71-å…¨å±€äºŒå€¼åŒ–">7.1 å…¨å±€äºŒå€¼åŒ–</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">img <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span> <span class="token comment"># å˜ç°åº¦å›¾åƒ</span>
thr<span class="token punctuation">,</span> img_rst <span class="token operator">=</span> cv2<span class="token punctuation">.</span>threshold<span class="token punctuation">(</span>img_gray<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>THRESH_BINARY<span class="token punctuation">)</span>

<span class="token comment"># ç¬¬ä¸€ä¸ªè¿”å›å€¼ï¼Œå¾—åˆ°å›¾åƒçš„é˜ˆå€¼ï¼Œ</span>
<span class="token comment"># ç¬¬äºŒä¸ªè¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯é˜ˆå€¼å¤„ç†åçš„å›¾åƒï¼Œ</span>

<span class="token comment"># x:ç”¨æ¥å¯¹åƒç´ å€¼è¿›è¡Œåˆ†ç±»çš„é˜ˆå€¼ã€‚</span>
<span class="token comment"># y:å½“åƒç´ å€¼é«˜äºï¼ˆæœ‰æ—¶æ˜¯å°äºï¼‰é˜ˆå€¼æ—¶åº”è¯¥è¢«èµ‹äºˆçš„æ–°çš„åƒç´ å€¼</span>
<span class="token comment"># Methods:ä¸åŒçš„ä¸åŒçš„é˜ˆå€¼æ–¹æ³•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="72-å±€éƒ¨äºŒå€¼åŒ–">7.2 å±€éƒ¨äºŒå€¼åŒ–</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">dst <span class="token operator">=</span> threshold<span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token number">127</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin">int</span> <span class="token builtin">type</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>





<h1><span id="3-è‰²å½©æŠ–åŠ¨">3ã€è‰²å½©æŠ–åŠ¨</span></h1><p>è‰²å½©æŠ–åŠ¨æ˜¯é€šè¿‡éšæœºè°ƒæ•´åŸå§‹å›¾ç‰‡çš„é¥±å’Œåº¦ï¼Œäº®åº¦ï¼Œå¯¹æ¯”åº¦æ¥å¯¹äº§ç”Ÿæ–°çš„å›¾åƒï¼Œå¢åŠ æ•°æ®é›†</p>
<h1><span id="4-è‰²åŸŸè½¬æ¢">4ã€è‰²åŸŸè½¬æ¢</span></h1><p>ç›®çš„ï¼šå¿½ç•¥é‡Œé¢çš„ä¸€éƒ¨åˆ†ï¼ŒæŠŠå¦ä¸€éƒ¨åˆ†ï¼ˆå¯¹åº”é¢œè‰²ï¼‰æå–å‡ºæ¥</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># BGRè½¬ç°åº¦</span>
image <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>src<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_GRAY2BGR<span class="token punctuation">)</span>

<span class="token comment"># ç°åº¦è½¬BGR</span>
image <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>src<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>
mask <span class="token operator">=</span> cv<span class="token punctuation">.</span>inRangeï¼ˆhsv_nemoï¼Œlight_orangeï¼Œdark_orangeï¼‰
res <span class="token operator">=</span> cv<span class="token punctuation">.</span>bitwise_and<span class="token punctuation">(</span>nemo<span class="token punctuation">,</span> nemo<span class="token punctuation">,</span> mask<span class="token operator">=</span>mask<span class="token punctuation">)</span>
<span class="token comment"># inRange()æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå›¾åƒã€ä¸‹é™å’Œä¸Šé™</span>


light_orange <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">190</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
dark_orange <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>
light_white <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
dark_white <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">145</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1><span id="5-äº®åº¦å’Œå¯¹æ¯”åº¦">5ã€äº®åº¦å’Œå¯¹æ¯”åº¦</span></h1><p>äº®åº¦</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> skimage <span class="token keyword">import</span> exposure

dst1 <span class="token operator">=</span> exposure<span class="token punctuation">.</span>adjust_gamma<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">#è°ƒæš—</span>
dst2 <span class="token operator">=</span> exposure<span class="token punctuation">.</span>adjust_gamma<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">#è°ƒäº®</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¯¹æ¯”åº¦</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">clahe <span class="token operator">=</span> cv<span class="token punctuation">.</span>createCLAHE<span class="token punctuation">(</span>clipLimit<span class="token punctuation">,</span> tileGridSize<span class="token punctuation">)</span>
res <span class="token operator">=</span> clahe<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>




















      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tangbingqing.github.io/2022/04/01/tensorboardx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="T.ng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="T.ng">
      <meta itemprop="description" content="">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | T.ng">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/01/tensorboardx/" class="post-title-link" itemprop="url">tensorboardx</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-01 19:38:37 / ä¿®æ”¹æ—¶é—´ï¼š19:41:12" itemprop="dateCreated datePublished" datetime="2022-04-01T19:38:37+08:00">2022-04-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/pytorch/" itemprop="url" rel="index"><span itemprop="name">pytorch</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li><a href="#%E4%B8%80-%E5%88%9B%E5%BB%BAsummarywriter">ä¸€ã€åˆ›å»ºSummaryWriter</a></li>
<li><a href="#%E4%BA%8C-add%E6%96%B9%E6%B3%95%E8%AE%B0%E5%BD%95%E6%95%B0%E6%8D%AE">äºŒã€ADDæ–¹æ³•è®°å½•æ•°æ®</a></li>
</ul>
<!-- tocstop -->

<h3><span id="ä¸€-åˆ›å»ºsummarywriter">ä¸€ã€åˆ›å»ºSummaryWriter</span></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> tensorboardX <span class="token keyword">import</span> SummaryWriter`

writer1 <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">'runs/exp'</span><span class="token punctuation">)</span> 
<span class="token comment">#æä¾›ä¸€ä¸ªè·¯å¾„ï¼Œå°†ä½¿ç”¨è¯¥è·¯å¾„æ¥ä¿å­˜æ—¥å¿—</span>

writer2 <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment">#æ— å‚æ•°ï¼Œé»˜è®¤å°†ä½¿ç”¨ runs/æ—¥æœŸæ—¶é—´ è·¯å¾„æ¥ä¿å­˜æ—¥å¿—</span>

writer3 <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span>comment<span class="token operator">=</span><span class="token string">'resnet'</span><span class="token punctuation">)</span>  
<span class="token comment">#ä½¿ç”¨ runs/æ—¥æœŸæ—¶é—´-comment è·¯å¾„æ¥ä¿å­˜æ—¥å¿—</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3><span id="äºŒ-addæ–¹æ³•è®°å½•æ•°æ®">äºŒã€ADDæ–¹æ³•è®°å½•æ•°æ®</span></h3><h4><span id="1-æ•°å­—">1ã€æ•°å­—</span></h4><p><code>add_scalar(tag, scalar_value, global_step=None, walltime=None)</code></p>
<p>// æ•°æ®åç§°ï¼ˆstring) //æ•°ç»„å¸¸é‡å€¼ï¼ˆfloatï¼‰//è®­ç»ƒçš„step //è®°å½•å‘ç”Ÿçš„æ—¶é—´</p>
<h4><span id="2-å›¾ç‰‡">2ã€å›¾ç‰‡</span></h4><p>##ä¸€æ¬¡åªèƒ½æ’å…¥ä¸€å¼ å›¾ç‰‡</p>
<p><code>add_image(tag, img_tensor, global_step=None, walltime=None, dataformats='CHW') </code>  </p>
<p>//æ•°æ®åç§° //å›¾åƒæ•°æ®ï¼ˆTensor / arrayï¼‰//è®­ç»ƒçš„step //</p>
<p>è®°å½•å‘ç”Ÿçš„æ—¶é—´ //å›¾åƒæ•°æ®çš„æ ¼å¼ï¼Œé»˜è®¤ä¸º â€˜CHWâ€™</p>
<p>##ä¸€æ¬¡æ’å…¥å¤šå¼ å›¾ç‰‡</p>
<p>1.ä½¿ç”¨ <code>torchvision</code> ä¸­çš„ <code>make_grid</code> æ–¹æ³•å°†å¤šå¼ å›¾ç‰‡æ‹¼åˆæˆä¸€å¼ å›¾ç‰‡åï¼Œå†è°ƒç”¨ <code>add_image</code> æ–¹æ³•ã€‚</p>
<p>2.ä½¿ç”¨ <code>SummaryWriter</code> çš„ <code>add_images</code> æ–¹æ³•ï¼Œå‚æ•°å’Œ <code>add_image</code> ç±»ä¼¼</p>
<h4><span id="3-ç›´æ–¹å›¾">3ã€ç›´æ–¹å›¾</span></h4><p><code>add_histogram(tag, values, global_step=None, bins='tensorflow', walltime=None, max_bins=None) </code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">T.ng</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
